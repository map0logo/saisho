<!DOCTYPE html>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="DocOnce: https://github.com/hplgit/doconce/" />
<meta name="description" content="Ch.7: Introduction to classes">

<title>Ch.7: Introduction to classes</title>







<!-- reveal.js: http://lab.hakim.se/reveal-js/ -->

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<link rel="stylesheet" href="reveal.js/css/reveal.css">
<link rel="stylesheet" href="reveal.js/css/theme/darkgray.css" id="theme">
<!--
<link rel="stylesheet" href="reveal.js/css/reveal.css">
<link rel="stylesheet" href="reveal.js/css/theme/beige.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/beigesmall.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/solarized.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/serif.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/night.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/moon.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/simple.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/sky.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/darkgray.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/default.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/cbc.css" id="theme">
<link rel="stylesheet" href="reveal.js/css/theme/simula.css" id="theme">
-->

<!-- For syntax highlighting -->
<link rel="stylesheet" href="reveal.js/lib/css/zenburn.css">

<!-- If the query includes 'print-pdf', use the PDF print sheet -->
<script>
document.write( '<link rel="stylesheet" href="reveal.js/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
</script>

<style type="text/css">
    hr { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    p.caption { width: 80%; font-size: 60%; font-style: italic; text-align: left; }
    hr.figure { border: 0; width: 80%; border-bottom: 1px solid #aaa}
    .reveal .alert-text-small   { font-size: 80%;  }
    .reveal .alert-text-large   { font-size: 130%; }
    .reveal .alert-text-normal  { font-size: 90%;  }
    .reveal .alert {
             padding:8px 35px 8px 14px; margin-bottom:18px;
             text-shadow:0 1px 0 rgba(255,255,255,0.5);
             border:5px solid #bababa;
             -webkit-border-radius: 14px; -moz-border-radius: 14px;
             border-radius:14px
             background-position: 10px 10px;
             background-repeat: no-repeat;
             background-size: 38px;
             padding-left: 30px; /* 55px; if icon */
     }
     .reveal .alert-block {padding-top:14px; padding-bottom:14px}
     .reveal .alert-block > p, .alert-block > ul {margin-bottom:1em}
     /*.reveal .alert li {margin-top: 1em}*/
     .reveal .alert-block p+p {margin-top:5px}
     /*.reveal .alert-notice { background-image: url(http://hplgit.github.io/doconce/bundled/html_images/small_gray_notice.png); }
     .reveal .alert-summary  { background-image:url(http://hplgit.github.io/doconce/bundled/html_images/small_gray_summary.png); }
     .reveal .alert-warning { background-image: url(http://hplgit.github.io/doconce/bundled/html_images/small_gray_warning.png); }
     .reveal .alert-question {background-image:url(http://hplgit.github.io/doconce/bundled/html_images/small_gray_question.png); } */

</style>



<!-- Styles for table layout of slides -->
<style type="text/css">
td.padding {
  padding-top:20px;
  padding-bottom:20px;
  padding-right:50px;
  padding-left:50px;
}
</style>

</head>

<body>
<div class="reveal">

<!-- Any section element inside the <div class="slides"> container
     is displayed as a slide -->

<div class="slides">





<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "none"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js", "color.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



    



<section>
<!-- ------------------- main content ---------------------- -->



<center><h1 style="text-align: center;">Ch.7: Introduction to classes</h1></center>  <!-- document title -->

<p>
<!-- author(s): Hans Petter Langtangen -->

<center>
<b>Hans Petter Langtangen</b> [1, 2]
</center>


<p>&nbsp;<br>
<!-- institution(s) -->

<center>[1] <b>Simula Research Laboratory</b></center>
<center>[2] <b>University of Oslo, Dept. of Informatics</b></center>
<p>&nbsp;<br>
<center><h4>Oct 23, 2014</h4></center> <!-- date -->
<p>

</section>


<section>

<h1 style="text-align: center;">Basics of classes  <a name="___sec0"></a></h1>

<p>

<table border="0">
<tr>
<td class="padding">
<center><p><img src="fig-class/associations/classes1.jpg" align="bottom" width=500></p></center>
</td>
<td class="padding">
<center><p><img src="fig-class/associations/classes2.png" align="bottom" width=500></p></center>
</td>
</tr>
</table>


<p>


<p>

</section>


<section>

<h2>Class = functions + data (variables) in one unit  <a name="___sec1"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>

<ul>
  <p><li> A class packs together data (a collection of variables) and functions as <em>one single unit</em></li>
  <p><li> As a programmer you can create a new class and thereby a new object type (like <code>float</code>, <code>list</code>, <code>file</code>, ...)</li>
  <p><li> A class is much like a module: a collection of &quot;global&quot; variables and functions that belong together</li>
  <p><li> There is only one instance of a module while a class can have many instances (copies)</li>
  <p><li> Modern programming applies classes to a large extent</li>
  <p><li> It will take some time to master the class concept</li>
  <p><li> Let's learn by doing!</li>
</ul>
</div>


<p>

</section>


<section>

<h2>Representing a function by a class; background  <a name="___sec2"></a></h2>

<p>
Consider a function of \( t \) with a parameter \( v_0 \):

<p>&nbsp;<br>
$$ y(t; v_0)=v_0t - {1\over2}gt^2$$
<p>&nbsp;<br>


<p>
We need both \( v_0 \) and \( t \) to evaluate \( y \) (and \( g=9.81 \)), but
how should we implement this?

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Having \( t \) and \( v_0 \) as arguments:</b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">y</span><span style="color: #d0d0d0">(t,</span> <span style="color: #d0d0d0">v0):</span>
    <span style="color: #d0d0d0">g</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">9.81</span>
    <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">v0*t</span> <span style="color: #d0d0d0">-</span> <span style="color: #3677a9">0.5</span><span style="color: #d0d0d0">*g*t**</span><span style="color: #3677a9">2</span>
</pre></div>

</div>


<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Having \( t \) as argument and \( v_0 \) as global variable:</b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">y</span><span style="color: #d0d0d0">(t):</span>
    <span style="color: #d0d0d0">g</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">9.81</span>
    <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">v0*t</span> <span style="color: #d0d0d0">-</span> <span style="color: #3677a9">0.5</span><span style="color: #d0d0d0">*g*t**</span><span style="color: #3677a9">2</span>
</pre></div>
<p>
Motivation: \( y(t) \) is a function of \( t \) only
</div>


<p>
<!-- Because \( y(t) \) is a function of \( t \) only. With a class, with -->
<!-- have a function \( y(t) \) of \( t \) only, but it also contains the value of \( v_0 \). -->

<p>

</section>


<section>

<h2>Representing a function by a class; idea  <a name="___sec3"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>

<ul>
 <p><li> With a class, <code>y(t)</code> can be a function of <code>t</code> only, but still have</li>
</ul>
<p>

  <code>v0</code> and <code>g</code> as parameters with given values.

<ul>
 <p><li> The class packs together a function <code>y(t)</code> and data (<code>v0</code>, <code>g</code>)</li>
</ul>
</div>


<p>

</section>


<section>

<h2>Representing a function by a class; technical overview  <a name="___sec4"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>

<ul>
  <p><li> We make a class <code>Y</code> for \( y(t;v_0) \) with variables <code>v0</code> and <code>g</code>
    and a function <code>value(t)</code> for computing \( y(t;v_0) \)</li>
  <p><li> Any class should also have a function <code>__init__</code> for initialization of the variables</li>
</ul>
</div>


<p>
<center><p><img src="fig-class/UML_class_Y.png" align="bottom" width=120></p></center>

<p>

</section>


<section>

<h2>Representing a function by a class; the code  <a name="___sec5"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">Y</span><span style="color: #d0d0d0">:</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">v0):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.v0</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">v0</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.g</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">9.81</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">value</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">t):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.v0*t</span> <span style="color: #d0d0d0">-</span> <span style="color: #3677a9">0.5</span><span style="color: #d0d0d0">*</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.g*t**</span><span style="color: #3677a9">2</span>
</pre></div>
<p>
Usage:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">y</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Y(v0=</span><span style="color: #3677a9">3</span><span style="color: #d0d0d0">)</span>            <span style="color: #999999; font-style: italic"># create instance (object)</span>
<span style="color: #d0d0d0">v</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">y.value(</span><span style="color: #3677a9">0.1</span><span style="color: #d0d0d0">)</span>       <span style="color: #999999; font-style: italic"># compute function value</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Representing a function by a class; the constructor  <a name="___sec6"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
When we write

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">y</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Y(v0=</span><span style="color: #3677a9">3</span><span style="color: #d0d0d0">)</span>
</pre></div>
<p>
we create a new variable (instance) <code>y</code> of type <code>Y</code>.
<code>Y(3)</code> is a call to the <em>constructor</em>:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%">    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">v0):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.v0</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">v0</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.g</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">9.81</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>What is this <code>self</code> variable? Stay cool - it will be understood later as you get used to it  <a name="___sec7"></a></h2>

<p>

<div class="fragment alert alert-block alert-block alert-text-normal">
<b></b>
<p>

<ul>
 <p><li class="fragment"> Think of <code>self</code> as <code>y</code>, i.e., the new variable to be created. <code>self.v0 = ...</code> means that we attach a variable <code>v0</code> to <code>self</code> (<code>y</code>).</li>
 <p><li class="fragment"> <code>Y(3)</code> means <code>Y.__init__(y, 3)</code>, i.e., set <code>self=y</code>, <code>v0=3</code></li>
 <p><li class="fragment"> Remember: <code>self</code> is always first parameter in a function, but never inserted in the call!</li>
 <p><li class="fragment"> After <code>y = Y(3)</code>, <code>y</code> has two variables <code>v0</code> and <code>g</code></li>
</ul>
<p>

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="fragment" class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">y.v0</span>
<span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">y.g</span>
</pre></div>

</div>



<p>

<div class="fragment alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<blockquote>
    <em>In mathematics you
    don't understand things. You just get used to them.</em>
    John von Neumann, mathematician, 1903-1957.
</blockquote>
</div>



<p>

</section>


<section>

<h2>Representing a function by a class; the value method  <a name="___sec8"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>

<ul>
  <p><li> Functions in classes are called <em>methods</em></li>
  <p><li> Variables in classes are called <em>attributes</em></li>
</ul>
<p>

Here is the <code>value</code> method:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">value</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">t):</span>
    <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.v0*t</span> <span style="color: #d0d0d0">-</span> <span style="color: #3677a9">0.5</span><span style="color: #d0d0d0">*</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.g*t**</span><span style="color: #3677a9">2</span>
</pre></div>
<p>
Example on a call:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">v</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">y.value(t=</span><span style="color: #3677a9">0.1</span><span style="color: #d0d0d0">)</span>
</pre></div>
<p>
<code>self</code> is left out in the call, but Python automatically inserts <code>y</code> as the <code>self</code> argument inside the <code>value</code> method. Think of the call as

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">Y.value(y,</span> <span style="color: #d0d0d0">t=</span><span style="color: #3677a9">0.1</span><span style="color: #d0d0d0">)</span>
</pre></div>
<p>
Inside <code>value</code> things &quot;appear&quot; as

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">y.v0*t</span> <span style="color: #d0d0d0">-</span> <span style="color: #3677a9">0.5</span><span style="color: #d0d0d0">*y.g*t**</span><span style="color: #3677a9">2</span>
</pre></div>
<p>
<code>self</code> gives access to &quot;global variables&quot; in the class object.
</div>


<p>

</section>


<section>

<h2>Representing a function by a class; summary  <a name="___sec9"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>

<ul>
  <p><li> Class <code>Y</code> collects the attributes <code>v0</code> and <code>g</code> and the method <code>value</code> as one unit</li>
  <p><li> <code>value(t)</code> is function of <code>t</code> only, but has automatically access to the parameters <code>v0</code> and <code>g</code> as <code>self.v0</code> and <code>self.g</code></li>
  <p><li> The great advantage: we can send <code>y.value</code> as an ordinary function of <code>t</code> to any other function that expects a function <code>f(t)</code> of one variable</li>
</ul>
<p>

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">make_table</span><span style="color: #d0d0d0">(f,</span> <span style="color: #d0d0d0">tstop,</span> <span style="color: #d0d0d0">n):</span>
    <span style="color: #6ab825; font-weight: bold">for</span> <span style="color: #d0d0d0">t</span> <span style="color: #6ab825; font-weight: bold">in</span> <span style="color: #d0d0d0">linspace(</span><span style="color: #3677a9">0</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">tstop,</span> <span style="color: #d0d0d0">n):</span>
        <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">t,</span> <span style="color: #d0d0d0">f(t)</span>

<span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">g</span><span style="color: #d0d0d0">(t):</span>
    <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">sin(t)*exp(-t)</span>

<span style="color: #d0d0d0">table(g,</span> <span style="color: #3677a9">2</span><span style="color: #d0d0d0">*pi,</span> <span style="color: #3677a9">101</span><span style="color: #d0d0d0">)</span>         <span style="color: #999999; font-style: italic"># send ordinary function</span>

<span style="color: #d0d0d0">y</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Y(</span><span style="color: #3677a9">6.5</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">table(y.value,</span> <span style="color: #3677a9">2</span><span style="color: #d0d0d0">*pi,</span> <span style="color: #3677a9">101</span><span style="color: #d0d0d0">)</span>   <span style="color: #999999; font-style: italic"># send class method</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Representing a function by a class; the general case  <a name="___sec10"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
Given a function with \( n+1 \) parameters and one independent variable,

<p>&nbsp;<br>
$$ f(x; p_0,\ldots,p_n)$$
<p>&nbsp;<br>

it is wise to represent <code>f</code> by a class where
\( p_0,\ldots,p_n \) are attributes and where there is a method, say <code>value(self, x)</code>, for computing \( f(x) \)
</div>


<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">MyFunc</span><span style="color: #d0d0d0">:</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">p0,</span> <span style="color: #d0d0d0">p1,</span> <span style="color: #d0d0d0">p2,</span> <span style="color: #d0d0d0">...,</span> <span style="color: #d0d0d0">pn):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.p0</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">p0</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.p1</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">p1</span>
        <span style="color: #d0d0d0">...</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.pn</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">pn</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">value</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">x):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">...</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Class for a function with four parameters  <a name="___sec11"></a></h2>

<p>&nbsp;<br>
$$
v(r; \beta, \mu_0, n, R) = \left({\beta\over 2\mu_0}\right)^{{1\over n}}
{n \over n+1}\left( R^{1 + {1\over n}} - r^{1 + {1\over n}}\right)
$$
<p>&nbsp;<br>


<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">VelocityProfile</span><span style="color: #d0d0d0">:</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">beta,</span> <span style="color: #d0d0d0">mu0,</span> <span style="color: #d0d0d0">n,</span> <span style="color: #d0d0d0">R):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.beta,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.mu0,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.n,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.R</span> <span style="color: #d0d0d0">=</span> \
        <span style="color: #d0d0d0">beta,</span> <span style="color: #d0d0d0">mu0,</span> <span style="color: #d0d0d0">n,</span> <span style="color: #d0d0d0">R</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">value</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">r):</span>
        <span style="color: #d0d0d0">beta,</span> <span style="color: #d0d0d0">mu0,</span> <span style="color: #d0d0d0">n,</span> <span style="color: #d0d0d0">R</span> <span style="color: #d0d0d0">=</span> \
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.beta,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.mu0,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.n,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.R</span>
        <span style="color: #d0d0d0">n</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">float</span><span style="color: #d0d0d0">(n)</span>  <span style="color: #999999; font-style: italic"># ensure float divisions</span>
        <span style="color: #d0d0d0">v</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">(beta/(</span><span style="color: #3677a9">2.0</span><span style="color: #d0d0d0">*mu0))**(</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">/n)*(n/(n+</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">))*</span>\
            <span style="color: #d0d0d0">(R**(</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">+</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">/n)</span> <span style="color: #d0d0d0">-</span> <span style="color: #d0d0d0">r**(</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">+</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">/n))</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">v</span>

<span style="color: #d0d0d0">v</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">VelocityProfile(R=</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">beta=</span><span style="color: #3677a9">0.06</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">mu0=</span><span style="color: #3677a9">0.02</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">n=</span><span style="color: #3677a9">0.1</span><span style="color: #d0d0d0">)</span>
<span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">v.value(r=</span><span style="color: #3677a9">0.1</span><span style="color: #d0d0d0">)</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Rough sketch of a Python class  <a name="___sec12"></a></h2>

<p>

<div class="fragment alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="fragment" class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">MyClass</span><span style="color: #d0d0d0">:</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">p1,</span> <span style="color: #d0d0d0">p2):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.attr1</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">p1</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.attr2</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">p2</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">method1</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">arg):</span>
        <span style="color: #999999; font-style: italic"># can init new attribute outside constructor:</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.attr3</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">arg</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.attr1</span> <span style="color: #d0d0d0">+</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.attr2</span> <span style="color: #d0d0d0">+</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.attr3</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">method2</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
        <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #ed9d13">&#39;Hello!&#39;</span>

<span style="color: #d0d0d0">m</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">MyClass(</span><span style="color: #3677a9">4</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">10</span><span style="color: #d0d0d0">)</span>
<span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">m.method1(-</span><span style="color: #3677a9">2</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">m.method2()</span>
</pre></div>

</div>



<p>

<div class="fragment alert alert-block alert-block alert-text-normal">
<b></b>
<p>
It is common to have a constructor where attributes are initialized, but this is not a requirement - attributes can be defined whenever desired
</div>



<p>

</section>


<section>

<h2>You can learn about other versions and views of class Y in the course book  <a name="___sec13"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>

<ul>
  <p><li> The book features a section on a different version of class <code>Y</code> where there is no constructor (which is possible)</li>
  <p><li> The book also features a section on how to implement classes without using classes</li>
  <p><li> These sections may be clarifying - or confusing</li>
</ul>
</div>


<p>

</section>


<section>

<h2>But what is this self variable? I want to know now!  <a name="___sec14"></a></h2>

<p>
<div class="alert alert-block alert-warning alert-text-normal">
<b>Warning.</b>
<p>
You have two choices:

<ol>
<p><li> follow the detailed explanations of what <code>self </code> really is</li>
<p><li> postpone understanding <code>self</code> until you have much more
   experience with class programming (suddenly <code>self</code> becomes clear!)</li>
</ol>
</div>


<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
The syntax

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">y</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Y(</span><span style="color: #3677a9">3</span><span style="color: #d0d0d0">)</span>
</pre></div>
<p>
can be thought of as

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">Y.__init__(y,</span> <span style="color: #3677a9">3</span><span style="color: #d0d0d0">)</span>   <span style="color: #999999; font-style: italic"># class prefix Y. is like a module prefix</span>
</pre></div>
<p>
Then

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #24909d">self</span><span style="color: #d0d0d0">.v0</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">v0</span>
</pre></div>
<p>
is actually

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">y.v0</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">3</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>How <code>self</code> works in the <code>value</code> method  <a name="___sec15"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">v</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">y.value(</span><span style="color: #3677a9">2</span><span style="color: #d0d0d0">)</span>
</pre></div>
<p>
can alternatively be written as

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">v</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Y.value(y,</span> <span style="color: #3677a9">2</span><span style="color: #d0d0d0">)</span>
</pre></div>
<p>
So, when we do <code>instance.method(arg1, arg2)</code>, <code>self</code> becomes
<code>instance</code> inside <code>method</code>.
</div>


<p>

</section>


<section>

<h2>Working with multiple instances may help explain <code>self</code>  <a name="___sec16"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<code>id(obj)</code>: print unique Python identifier of an object

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">SelfExplorer</span><span style="color: #d0d0d0">:</span>
    <span style="color: #ed9d13">&quot;&quot;&quot;Class for computing a*x.&quot;&quot;&quot;</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">a):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.a</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">a</span>
        <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #ed9d13">&#39;init: a=%g, id(self)=%d&#39;</span> <span style="color: #d0d0d0">%</span> <span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.a,</span> <span style="color: #24909d">id</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">))</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">value</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">x):</span>
        <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #ed9d13">&#39;value: a=%g, id(self)=%d&#39;</span> <span style="color: #d0d0d0">%</span> <span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.a,</span> <span style="color: #24909d">id</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">))</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.a*x</span>
</pre></div>

</div>


<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pyshell) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">s1</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">SelfExplorer(</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">init:</span> <span style="color: #d0d0d0">a=</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #24909d">id</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">)=</span><span style="color: #3677a9">38085696</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #24909d">id</span><span style="color: #d0d0d0">(s1)</span>
<span style="color: #3677a9">38085696</span>

<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">s2</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">SelfExplorer(</span><span style="color: #3677a9">2</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">init:</span> <span style="color: #d0d0d0">a=</span><span style="color: #3677a9">2</span><span style="color: #d0d0d0">,</span> <span style="color: #24909d">id</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">)=</span><span style="color: #3677a9">38085192</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #24909d">id</span><span style="color: #d0d0d0">(s2)</span>
<span style="color: #3677a9">38085192</span>

<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">s1.value(</span><span style="color: #3677a9">4</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">value:</span> <span style="color: #d0d0d0">a=</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #24909d">id</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">)=</span><span style="color: #3677a9">38085696</span>
<span style="color: #3677a9">4</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">SelfExplorer.value(s1,</span> <span style="color: #3677a9">4</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">value:</span> <span style="color: #d0d0d0">a=</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #24909d">id</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">)=</span><span style="color: #3677a9">38085696</span>
<span style="color: #3677a9">4</span>

<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">s2.value(</span><span style="color: #3677a9">5</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">value:</span> <span style="color: #d0d0d0">a=</span><span style="color: #3677a9">2</span><span style="color: #d0d0d0">,</span> <span style="color: #24909d">id</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">)=</span><span style="color: #3677a9">38085192</span>
<span style="color: #3677a9">10</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">SelfExplorer.value(s2,</span> <span style="color: #3677a9">5</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">value:</span> <span style="color: #d0d0d0">a=</span><span style="color: #3677a9">2</span><span style="color: #d0d0d0">,</span> <span style="color: #24909d">id</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">)=</span><span style="color: #3677a9">38085192</span>
<span style="color: #3677a9">10</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Another class example: a bank account  <a name="___sec17"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>

<ul>
  <p><li> Attributes: name of owner, account number, balance</li>
  <p><li> Methods: deposit, withdraw, pretty print</li>
</ul>
</div>


<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">Account</span><span style="color: #d0d0d0">:</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">name,</span> <span style="color: #d0d0d0">account_number,</span> <span style="color: #d0d0d0">initial_amount):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.name</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">name</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.no</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">account_number</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.balance</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">initial_amount</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">deposit</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">amount):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.balance</span> <span style="color: #d0d0d0">+=</span> <span style="color: #d0d0d0">amount</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">withdraw</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">amount):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.balance</span> <span style="color: #d0d0d0">-=</span> <span style="color: #d0d0d0">amount</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">dump</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
        <span style="color: #d0d0d0">s</span> <span style="color: #d0d0d0">=</span> <span style="color: #ed9d13">&#39;%s, %s, balance: %s&#39;</span> <span style="color: #d0d0d0">%</span> \
            <span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.name,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.no,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.balance)</span>
        <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">s</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>UML diagram of class Account  <a name="___sec18"></a></h2>

<p>
<center><p><img src="fig-class/UML_class_Account.png" align="bottom" width=120></p></center>

<p>

</section>


<section>

<h2>Example on using class Account  <a name="___sec19"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pyshell) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">a1</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Account(</span><span style="color: #ed9d13">&#39;John Olsson&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;19371554951&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">20000</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">a2</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Account(</span><span style="color: #ed9d13">&#39;Liz Olsson&#39;</span><span style="color: #d0d0d0">,</span>  <span style="color: #ed9d13">&#39;19371564761&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">20000</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">a1.deposit(</span><span style="color: #3677a9">1000</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">a1.withdraw(</span><span style="color: #3677a9">4000</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">a2.withdraw(</span><span style="color: #3677a9">10500</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">a1.withdraw(</span><span style="color: #3677a9">3500</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #ed9d13">&quot;a1&#39;s balance:&quot;</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">a1.balance</span>
<span style="color: #d0d0d0">a1</span><span style="color: #ed9d13">&#39;s balance: 13500</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">a1.dump()</span>
<span style="color: #d0d0d0">John</span> <span style="color: #d0d0d0">Olsson,</span> <span style="color: #3677a9">19371554951</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">balance:</span> <span style="color: #3677a9">13500</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">a2.dump()</span>
<span style="color: #d0d0d0">Liz</span> <span style="color: #d0d0d0">Olsson,</span> <span style="color: #3677a9">19371564761</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">balance:</span> <span style="color: #3677a9">9500</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Use underscore in attribute names to avoid misuse  <a name="___sec20"></a></h2>

<p>

<div class="fragment alert alert-block alert-block alert-text-normal">
<b>Possible, but not intended use:</b>
<p>
<p>

<!-- code=python (!bc pyshell) typeset with pygments style "native" -->
<div class="fragment" class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">a1.name</span> <span style="color: #d0d0d0">=</span> <span style="color: #ed9d13">&#39;Some other name&#39;</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">a1.balance</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">100000</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">a1.no</span> <span style="color: #d0d0d0">=</span> <span style="color: #ed9d13">&#39;19371564768&#39;</span>
</pre></div>

</div>



<p>

<div class="fragment alert alert-block alert-block alert-text-normal">
<b>The assumptions on correct usage:</b>
<p>

<ul>
  <p><li class="fragment"> The attributes should <em>not</em> be changed!</li>
  <p><li class="fragment"> The <code>balance</code> attribute can be viewed</li>
  <p><li class="fragment"> Changing <code>balance</code> is done through <code>withdraw</code> or <code>deposit</code></li>
</ul>
</div>



<p>

<div class="fragment alert alert-block alert-block alert-text-normal">
<b>Remedy:</b>
<p>
Attributes and methods not intended for use outside the class can be marked as <em>protected</em> by prefixing the name with an underscore (e.g., <code>_name</code>). This is just a convention - and no technical way of avoiding attributes and methods to be accessed.
</div>



<p>

</section>


<section>

<h2>Improved class with attribute protection (underscore)  <a name="___sec21"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">AccountP</span><span style="color: #d0d0d0">:</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">name,</span> <span style="color: #d0d0d0">account_number,</span> <span style="color: #d0d0d0">initial_amount):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">._name</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">name</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">._no</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">account_number</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">._balance</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">initial_amount</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">deposit</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">amount):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">._balance</span> <span style="color: #d0d0d0">+=</span> <span style="color: #d0d0d0">amount</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">withdraw</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">amount):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">._balance</span> <span style="color: #d0d0d0">-=</span> <span style="color: #d0d0d0">amount</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">get_balance</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>    <span style="color: #999999; font-style: italic"># NEW - read balance value</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">._balance</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">dump</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
        <span style="color: #d0d0d0">s</span> <span style="color: #d0d0d0">=</span> <span style="color: #ed9d13">&#39;%s, %s, balance: %s&#39;</span> <span style="color: #d0d0d0">%</span> \
            <span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">._name,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">._no,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">._balance)</span>
        <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">s</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Usage of improved class AccountP  <a name="___sec22"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">a1</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">AccountP(</span><span style="color: #ed9d13">&#39;John Olsson&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;19371554951&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">20000</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">a1.withdraw(</span><span style="color: #3677a9">4000</span><span style="color: #d0d0d0">)</span>

<span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">a1._balance</span>      <span style="color: #999999; font-style: italic"># it works, but a convention is broken</span>

<span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">a1.get_balance()</span> <span style="color: #999999; font-style: italic"># correct way of viewing the balance</span>

<span style="color: #d0d0d0">a1._no</span> <span style="color: #d0d0d0">=</span> <span style="color: #ed9d13">&#39;19371554955&#39;</span> <span style="color: #999999; font-style: italic"># this is a &quot;serious crime&quot;!</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Another example: a phone book  <a name="___sec23"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>

<ul>
  <p><li> A phone book is a list of data about persons</li>
  <p><li> Data about a person: name, mobile phone, office phone, private phone, email</li>
  <p><li> Let us create a class for data about a person!</li>
  <p><li> Methods:</li>

<ul>
    <p><li> Constructor for initializing name, plus one or more other data</li>
    <p><li> Add new mobile number</li>
    <p><li> Add new office number</li>
    <p><li> Add new private number</li>
    <p><li> Add new email</li>
    <p><li> Write out person data</li>
</ul>
<p>

</ul>
</div>


<p>

</section>


<section>

<h2>UML diagram of class Person  <a name="___sec24"></a></h2>

<p>
<center><p><img src="fig-class/UML_class_Person.png" align="bottom" width=240></p></center>

<p>

</section>


<section>

<h2>Basic code of class Person  <a name="___sec25"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"> <span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">Person</span><span style="color: #d0d0d0">:</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">name,</span>
                 <span style="color: #d0d0d0">mobile_phone=</span><span style="color: #24909d">None</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">office_phone=</span><span style="color: #24909d">None</span><span style="color: #d0d0d0">,</span>
                 <span style="color: #d0d0d0">private_phone=</span><span style="color: #24909d">None</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">email=</span><span style="color: #24909d">None</span><span style="color: #d0d0d0">):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.name</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">name</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.mobile</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">mobile_phone</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.office</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">office_phone</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.private</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">private_phone</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.email</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">email</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">add_mobile_phone</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">number):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.mobile</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">number</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">add_office_phone</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">number):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.office</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">number</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">add_private_phone</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">number):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.private</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">number</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">add_email</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">address):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.email</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">address</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Code of a dump method for printing all class contents  <a name="___sec26"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"> <span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">Person</span><span style="color: #d0d0d0">:</span>
    <span style="color: #d0d0d0">...</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">dump</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
        <span style="color: #d0d0d0">s</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.name</span> <span style="color: #d0d0d0">+</span> <span style="color: #ed9d13">&#39;\n&#39;</span>
        <span style="color: #6ab825; font-weight: bold">if</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.mobile</span> <span style="color: #6ab825; font-weight: bold">is</span> <span style="color: #6ab825; font-weight: bold">not</span> <span style="color: #24909d">None</span><span style="color: #d0d0d0">:</span>
            <span style="color: #d0d0d0">s</span> <span style="color: #d0d0d0">+=</span> <span style="color: #ed9d13">&#39;mobile phone:   %s\n&#39;</span> <span style="color: #d0d0d0">%</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.mobile</span>
        <span style="color: #6ab825; font-weight: bold">if</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.office</span> <span style="color: #6ab825; font-weight: bold">is</span> <span style="color: #6ab825; font-weight: bold">not</span> <span style="color: #24909d">None</span><span style="color: #d0d0d0">:</span>
            <span style="color: #d0d0d0">s</span> <span style="color: #d0d0d0">+=</span> <span style="color: #ed9d13">&#39;office phone:   %s\n&#39;</span> <span style="color: #d0d0d0">%</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.office</span>
        <span style="color: #6ab825; font-weight: bold">if</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.private</span> <span style="color: #6ab825; font-weight: bold">is</span> <span style="color: #6ab825; font-weight: bold">not</span> <span style="color: #24909d">None</span><span style="color: #d0d0d0">:</span>
            <span style="color: #d0d0d0">s</span> <span style="color: #d0d0d0">+=</span> <span style="color: #ed9d13">&#39;private phone:  %s\n&#39;</span> <span style="color: #d0d0d0">%</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.private</span>
        <span style="color: #6ab825; font-weight: bold">if</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.email</span> <span style="color: #6ab825; font-weight: bold">is</span> <span style="color: #6ab825; font-weight: bold">not</span> <span style="color: #24909d">None</span><span style="color: #d0d0d0">:</span>
            <span style="color: #d0d0d0">s</span> <span style="color: #d0d0d0">+=</span> <span style="color: #ed9d13">&#39;email address:  %s\n&#39;</span> <span style="color: #d0d0d0">%</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.email</span>
        <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">s</span>
</pre></div>

</div>


<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Usage:</b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">p1</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Person(</span><span style="color: #ed9d13">&#39;Hans Petter Langtangen&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">email=</span><span style="color: #ed9d13">&#39;hpl@simula.no&#39;</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">p1.add_office_phone(</span><span style="color: #ed9d13">&#39;67828283&#39;</span><span style="color: #d0d0d0">),</span>
<span style="color: #d0d0d0">p2</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Person(</span><span style="color: #ed9d13">&#39;Aslak Tveito&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">office_phone=</span><span style="color: #ed9d13">&#39;67828282&#39;</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">p2.add_email(</span><span style="color: #ed9d13">&#39;aslak@simula.no&#39;</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">phone_book</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">[p1,</span> <span style="color: #d0d0d0">p2]</span>                           <span style="color: #999999; font-style: italic"># list</span>
<span style="color: #d0d0d0">phone_book</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">{</span><span style="color: #ed9d13">&#39;Langtangen&#39;</span><span style="color: #d0d0d0">:</span> <span style="color: #d0d0d0">p1,</span> <span style="color: #ed9d13">&#39;Tveito&#39;</span><span style="color: #d0d0d0">:</span> <span style="color: #d0d0d0">p2}</span>   <span style="color: #999999; font-style: italic"># better</span>
<span style="color: #6ab825; font-weight: bold">for</span> <span style="color: #d0d0d0">p</span> <span style="color: #6ab825; font-weight: bold">in</span> <span style="color: #d0d0d0">phone_book:</span>
    <span style="color: #d0d0d0">p.dump()</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Another example: a class for a circle  <a name="___sec27"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>

<ul>
  <p><li> A circle is defined by its center point \( x_0 \), \( y_0 \) and its radius \( R \)</li>
  <p><li> These data can be attributes in a class</li>
  <p><li> Possible methods in the class: <code>area</code>, <code>circumference</code></li>
  <p><li> The constructor initializes \( x_0 \), \( y_0 \) and \( R \)</li>
</ul>
</div>


<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">Circle</span><span style="color: #d0d0d0">:</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">x0,</span> <span style="color: #d0d0d0">y0,</span> <span style="color: #d0d0d0">R):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.x0,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.y0,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.R</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">x0,</span> <span style="color: #d0d0d0">y0,</span> <span style="color: #d0d0d0">R</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">area</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">pi*</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.R**</span><span style="color: #3677a9">2</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">circumference</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #3677a9">2</span><span style="color: #d0d0d0">*pi*</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.R</span>
</pre></div>

</div>


<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pyshell) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">c</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Circle(</span><span style="color: #3677a9">2</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">-</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">5</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #ed9d13">&#39;A circle with radius %g at (%g, %g) has area %g&#39;</span> <span style="color: #d0d0d0">%</span> \
<span style="color: #d0d0d0">...</span>       <span style="color: #d0d0d0">(c.R,</span> <span style="color: #d0d0d0">c.x0,</span> <span style="color: #d0d0d0">c.y0,</span> <span style="color: #d0d0d0">c.area())</span>
<span style="color: #d0d0d0">A</span> <span style="color: #d0d0d0">circle</span> <span style="color: #6ab825; font-weight: bold">with</span> <span style="color: #d0d0d0">radius</span> <span style="color: #3677a9">5</span> <span style="color: #d0d0d0">at</span> <span style="color: #d0d0d0">(</span><span style="color: #3677a9">2</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">-</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">)</span> <span style="color: #d0d0d0">has</span> <span style="color: #d0d0d0">area</span> <span style="color: #3677a9">78.5398</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Test function for class Circle  <a name="___sec28"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">test_Circle</span><span style="color: #d0d0d0">():</span>
    <span style="color: #d0d0d0">R</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">2.5</span>
    <span style="color: #d0d0d0">c</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Circle(</span><span style="color: #3677a9">7.4</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">-</span><span style="color: #3677a9">8.1</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">R)</span>

    <span style="color: #6ab825; font-weight: bold">from</span> <span style="color: #447fcf; text-decoration: underline">math</span> <span style="color: #6ab825; font-weight: bold">import</span> <span style="color: #d0d0d0">pi</span>
    <span style="color: #d0d0d0">exact_area</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">pi*R**</span><span style="color: #3677a9">2</span>
    <span style="color: #d0d0d0">computed_area</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">c.area()</span>
    <span style="color: #d0d0d0">diff</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">abs</span><span style="color: #d0d0d0">(exact_area</span> <span style="color: #d0d0d0">-</span> <span style="color: #d0d0d0">computed_area)</span>
    <span style="color: #d0d0d0">tol</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">1E-14</span>
    <span style="color: #6ab825; font-weight: bold">assert</span> <span style="color: #d0d0d0">diff</span> <span style="color: #d0d0d0">&lt;</span> <span style="color: #d0d0d0">tol,</span> <span style="color: #ed9d13">&#39;bug in Circle.area, diff=%s&#39;</span> <span style="color: #d0d0d0">%</span> <span style="color: #d0d0d0">diff</span>

    <span style="color: #d0d0d0">exact_circumference</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">2</span><span style="color: #d0d0d0">*pi*R</span>
    <span style="color: #d0d0d0">computed_circumference</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">c.circumference()</span>
    <span style="color: #d0d0d0">diff</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">abs</span><span style="color: #d0d0d0">(exact_circumference</span> <span style="color: #d0d0d0">-</span> <span style="color: #d0d0d0">computed_circumference)</span>
    <span style="color: #6ab825; font-weight: bold">assert</span> <span style="color: #d0d0d0">diff</span> <span style="color: #d0d0d0">&lt;</span> <span style="color: #d0d0d0">tol,</span> <span style="color: #ed9d13">&#39;bug in Circle.circumference, diff=%s&#39;</span> <span style="color: #d0d0d0">%</span> <span style="color: #d0d0d0">diff</span>
</pre></div>

</div>


<p>

</section>


<section>

<h1 style="text-align: center;">Special methods  <a name="___sec29"></a></h1>

<p>


<p>

<table border="0">
<tr>
<td class="padding">
<center><p><img src="fig-class/associations/special_methods1.jpg" align="bottom" width=500></p></center>
</td>
<td class="padding">
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">MyClass</span><span style="color: #d0d0d0">:</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">a,</span> <span style="color: #d0d0d0">b):</span>
    <span style="color: #d0d0d0">...</span>

<span style="color: #d0d0d0">p1</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">MyClass(</span><span style="color: #3677a9">2</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">5</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">p2</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">MyClass(-</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">10</span><span style="color: #d0d0d0">)</span>

<span style="color: #d0d0d0">p3</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">p1</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">p2</span>
<span style="color: #d0d0d0">p4</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">p1</span> <span style="color: #d0d0d0">-</span> <span style="color: #d0d0d0">p2</span>
<span style="color: #d0d0d0">p5</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">p1*p2</span>
<span style="color: #d0d0d0">p6</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">p1**</span><span style="color: #3677a9">7</span> <span style="color: #d0d0d0">+</span> <span style="color: #3677a9">4</span><span style="color: #d0d0d0">*p3</span>
</pre></div>
<p>
</td>
</tr>
</table>


<p>

</section>


<section>

<h2><em>Special methods</em> allow nice syntax and are recognized by double leading and trailing underscores  <a name="___sec30"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">...)</span>
<span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__call__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">...)</span>
<span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__add__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other)</span>

<span style="color: #999999; font-style: italic"># Python syntax</span>
<span style="color: #d0d0d0">y</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Y(</span><span style="color: #3677a9">4</span><span style="color: #d0d0d0">)</span>
<span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">y(</span><span style="color: #3677a9">2</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">z</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Y(</span><span style="color: #3677a9">6</span><span style="color: #d0d0d0">)</span>
<span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">y</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">z</span>

<span style="color: #999999; font-style: italic"># What&#39;s actually going on</span>
<span style="color: #d0d0d0">Y.__init__(y,</span> <span style="color: #3677a9">4</span><span style="color: #d0d0d0">)</span>
<span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">Y.__call__(y,</span> <span style="color: #3677a9">2</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">Y.__init__(z,</span> <span style="color: #3677a9">6</span><span style="color: #d0d0d0">)</span>
<span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">Y.__add__(y,</span> <span style="color: #d0d0d0">z)</span>
</pre></div>
<p>
We shall learn about many more such <em>special methods</em>
</div>


<p>

</section>


<section>

<h2>Example on a call special method  <a name="___sec31"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
Replace the <code>value</code> method by a <em>call</em> special method:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">Y</span><span style="color: #d0d0d0">:</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">v0):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.v0</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">v0</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.g</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">9.81</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__call__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">t):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.v0*t</span> <span style="color: #d0d0d0">-</span> <span style="color: #3677a9">0.5</span><span style="color: #d0d0d0">*</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.g*t**</span><span style="color: #3677a9">2</span>
</pre></div>
<p>
Now we can write

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">y</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Y(</span><span style="color: #3677a9">3</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">v</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">y(</span><span style="color: #3677a9">0.1</span><span style="color: #d0d0d0">)</span> <span style="color: #999999; font-style: italic"># same as v = y.__call__(0.1) or Y.__call__(y, 0.1)</span>
</pre></div>
<p>
Note:

<ul>
 <p><li> The instance <code>y</code> behaves and looks as a function!</li>
 <p><li> The <code>value(t)</code> method does the same, but <code>__call__</code> allows nicer syntax for computing function values</li>
</ul>
</div>


<p>

</section>


<section>

<h2>Representing a function by a class revisited  <a name="___sec32"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
Given a function with \( n+1 \) parameters and one independent variable,

<p>&nbsp;<br>
$$ f(x; p_0,\ldots,p_n)$$
<p>&nbsp;<br>

it is wise to represent <code>f</code> by a class where \( p_0,\ldots,p_n \)
are attributes and <code>__call__(x)</code> computes \( f(x) \)
</div>


<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">MyFunc</span><span style="color: #d0d0d0">:</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">p0,</span> <span style="color: #d0d0d0">p1,</span> <span style="color: #d0d0d0">p2,</span> <span style="color: #d0d0d0">...,</span> <span style="color: #d0d0d0">pn):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.p0</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">p0</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.p1</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">p1</span>
        <span style="color: #d0d0d0">...</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.pn</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">pn</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__call__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">x):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">...</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Can we automatically differentiate a function?  <a name="___sec33"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
Given some mathematical function in Python, say

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">f</span><span style="color: #d0d0d0">(x):</span>
    <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">x**</span><span style="color: #3677a9">3</span>
</pre></div>
<p>
can we make a class <code>Derivative</code> and write

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">dfdx</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Derivative(f)</span>
</pre></div>
<p>
so that <code>dfdx</code> behaves as a function that computes the derivative of <code>f(x)</code>?

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">dfdx(</span><span style="color: #3677a9">2</span><span style="color: #d0d0d0">)</span>   <span style="color: #999999; font-style: italic"># computes 3*x**2 for x=2</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Automagic differentiation; solution  <a name="___sec34"></a></h2>

<p>

<div class="fragment alert alert-block alert-block alert-text-normal">
<b>Method.</b>
<p>
We use numerical differentiation &quot;behind the curtain&quot;:

<p>&nbsp;<br>
$$ f'(x) \approx {f(x+h)-f(x)\over h} $$
<p>&nbsp;<br>

for a small (yet moderate) \( h \), say \( h=10^{-5} \)
</div>



<p>

<div class="fragment alert alert-block alert-block alert-text-normal">
<b>Implementation.</b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="fragment" class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">Derivative</span><span style="color: #d0d0d0">:</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">f,</span> <span style="color: #d0d0d0">h=</span><span style="color: #3677a9">1E-5</span><span style="color: #d0d0d0">):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.f</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">f</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.h</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">float</span><span style="color: #d0d0d0">(h)</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__call__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">x):</span>
        <span style="color: #d0d0d0">f,</span> <span style="color: #d0d0d0">h</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.f,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.h</span>      <span style="color: #999999; font-style: italic"># make short forms</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">(f(x+h)</span> <span style="color: #d0d0d0">-</span> <span style="color: #d0d0d0">f(x))/h</span>
</pre></div>

</div>



<p>

</section>


<section>

<h2>Automagic differentiation; demo  <a name="___sec35"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pyshell) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">from</span> <span style="color: #447fcf; text-decoration: underline">math</span> <span style="color: #6ab825; font-weight: bold">import</span> <span style="color: #d0d0d0">*</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">df</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Derivative(sin)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">x</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">pi</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">df(x)</span>
<span style="color: #d0d0d0">-</span><span style="color: #3677a9">1.000000082740371</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">cos(x)</span>  <span style="color: #999999; font-style: italic"># exact</span>
<span style="color: #d0d0d0">-</span><span style="color: #3677a9">1.0</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">g</span><span style="color: #d0d0d0">(t):</span>
<span style="color: #d0d0d0">...</span>     <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">t**</span><span style="color: #3677a9">3</span>
<span style="color: #d0d0d0">...</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">dg</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Derivative(g)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">t</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">1</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">dg(t)</span>  <span style="color: #999999; font-style: italic"># compare with 3 (exact)</span>
<span style="color: #3677a9">3.000000248221113</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Automagic differentiation; useful in Newton's method  <a name="___sec36"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
Newton's method solves nonlinear equations \( f(x)=0 \), but the method requires \( f'(x) \)

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">Newton</span><span style="color: #d0d0d0">(f,</span> <span style="color: #d0d0d0">xstart,</span> <span style="color: #d0d0d0">dfdx,</span> <span style="color: #d0d0d0">epsilon=</span><span style="color: #3677a9">1E-6</span><span style="color: #d0d0d0">):</span>
    <span style="color: #d0d0d0">...</span>
    <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">x,</span> <span style="color: #d0d0d0">no_of_iterations,</span> <span style="color: #d0d0d0">f(x)</span>
</pre></div>
<p>
Suppose \( f'(x) \) requires boring/lengthy derivation, then class <code>Derivative</code> is handy:

<p>

<!-- code=python (!bc pyshell) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">f</span><span style="color: #d0d0d0">(x):</span>
<span style="color: #d0d0d0">...</span>     <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #3677a9">100000</span><span style="color: #d0d0d0">*(x</span> <span style="color: #d0d0d0">-</span> <span style="color: #3677a9">0.9</span><span style="color: #d0d0d0">)**</span><span style="color: #3677a9">2</span> <span style="color: #d0d0d0">*</span> <span style="color: #d0d0d0">(x</span> <span style="color: #d0d0d0">-</span> <span style="color: #3677a9">1.1</span><span style="color: #d0d0d0">)**</span><span style="color: #3677a9">3</span>
<span style="color: #d0d0d0">...</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">df</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Derivative(f)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">xstart</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">1.01</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">Newton(f,</span> <span style="color: #d0d0d0">xstart,</span> <span style="color: #d0d0d0">df,</span> <span style="color: #d0d0d0">epsilon=</span><span style="color: #3677a9">1E-5</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">(</span><span style="color: #3677a9">1.0987610068093443</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">8</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">-</span><span style="color: #3677a9">7.5139644257961411e-06</span><span style="color: #d0d0d0">)</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Automagic differentiation; test function  <a name="___sec37"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>

<ul>
  <p><li> How can we test class <code>Derivative</code>?</li>
  <p><li> Method 1: compute \( (f(x+h)-f(x))/h \) by hand for some \( f \) and \( h \)</li>
  <p><li> Method 2: utilize that linear functions are differentiated
    exactly by our numerical formula, regardless of \( h \)</li>
</ul>
<p>

Test function based on method 2:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">test_Derivative</span><span style="color: #d0d0d0">():</span>
    <span style="color: #999999; font-style: italic"># The formula is exact for linear functions, regardless of h</span>
    <span style="color: #d0d0d0">f</span> <span style="color: #d0d0d0">=</span> <span style="color: #6ab825; font-weight: bold">lambda</span> <span style="color: #d0d0d0">x:</span> <span style="color: #d0d0d0">a*x</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">b</span>
    <span style="color: #d0d0d0">a</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">3.5</span><span style="color: #d0d0d0">;</span> <span style="color: #d0d0d0">b</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">8</span>
    <span style="color: #d0d0d0">dfdx</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Derivative(f,</span> <span style="color: #d0d0d0">h=</span><span style="color: #3677a9">0.5</span><span style="color: #d0d0d0">)</span>
    <span style="color: #d0d0d0">diff</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">abs</span><span style="color: #d0d0d0">(dfdx(</span><span style="color: #3677a9">4.5</span><span style="color: #d0d0d0">)</span> <span style="color: #d0d0d0">-</span> <span style="color: #d0d0d0">a)</span>
    <span style="color: #6ab825; font-weight: bold">assert</span> <span style="color: #d0d0d0">diff</span> <span style="color: #d0d0d0">&lt;</span> <span style="color: #3677a9">1E-14</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;bug in class Derivative, diff=%s&#39;</span> <span style="color: #d0d0d0">%</span> <span style="color: #d0d0d0">diff</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Automagic differentiation; explanation of the test function  <a name="___sec38"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Use of lambda functions:</b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">f</span> <span style="color: #d0d0d0">=</span> <span style="color: #6ab825; font-weight: bold">lambda</span> <span style="color: #d0d0d0">x:</span> <span style="color: #d0d0d0">a*x</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">b</span>
</pre></div>
<p>
is equivalent to

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">f</span><span style="color: #d0d0d0">(x):</span>
    <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">a*x</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">b</span>
</pre></div>
<p>
Lambda functions are convenient for producing quick, short code
</div>


<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Use of closure:</b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">f</span> <span style="color: #d0d0d0">=</span> <span style="color: #6ab825; font-weight: bold">lambda</span> <span style="color: #d0d0d0">x:</span> <span style="color: #d0d0d0">a*x</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">b</span>
<span style="color: #d0d0d0">a</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">3.5</span><span style="color: #d0d0d0">;</span> <span style="color: #d0d0d0">b</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">8</span>
<span style="color: #d0d0d0">dfdx</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Derivative(f,</span> <span style="color: #d0d0d0">h=</span><span style="color: #3677a9">0.5</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">dfdx(</span><span style="color: #3677a9">4.5</span><span style="color: #d0d0d0">)</span>
</pre></div>
<p>
Looks straightforward...but

<ul>
 <p><li> How can <code>Derivative.__call__</code> know <code>a</code> and <code>b</code> when it calls
   our <code>f(x)</code> function?</li>
 <p><li> Local functions inside functions remember (have access to)
   <em>all</em> local variables in the function they are defined (!)</li>
 <p><li> <code>f</code> can access <code>a</code> and <code>b</code> in <code>test_Derivative</code> even when
   called from <code>__call__</code> in class `Derivative</li>
 <p><li> <code>f</code> is known as a <em>closure</em> in computer science</li>
</ul>
</div>


<p>

</section>


<section>

<h2>Automagic differentiation detour; sympy solution (exact differentiation via symbolic expressions)  <a name="___sec39"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
SymPy can perform exact, symbolic differentiation:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">from</span> <span style="color: #447fcf; text-decoration: underline">sympy</span> <span style="color: #6ab825; font-weight: bold">import</span> <span style="color: #d0d0d0">*</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">g</span><span style="color: #d0d0d0">(t):</span>
<span style="color: #d0d0d0">...</span>     <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">t**</span><span style="color: #3677a9">3</span>
<span style="color: #d0d0d0">...</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">t</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Symbol(</span><span style="color: #ed9d13">&#39;t&#39;</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">dgdt</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">diff(g(t),</span> <span style="color: #d0d0d0">t)</span>           <span style="color: #999999; font-style: italic"># compute g&#39;(t)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">dgdt</span>
<span style="color: #3677a9">3</span><span style="color: #d0d0d0">*t**</span><span style="color: #3677a9">2</span>

<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #999999; font-style: italic"># Turn sympy expression dgdt into Python function dg(t)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">dg</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">lambdify([t],</span> <span style="color: #d0d0d0">dgdt)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">dg(</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">)</span>
<span style="color: #3677a9">3</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Automagic differentiation detour; class based on sympy  <a name="___sec40"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">import</span> <span style="color: #447fcf; text-decoration: underline">sympy</span> <span style="color: #6ab825; font-weight: bold">as</span> <span style="color: #447fcf; text-decoration: underline">sp</span>

<span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">Derivative_sympy</span><span style="color: #d0d0d0">:</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">f):</span>
        <span style="color: #999999; font-style: italic"># f: Python f(x)</span>
        <span style="color: #d0d0d0">x</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">sp.Symbol(</span><span style="color: #ed9d13">&#39;x&#39;</span><span style="color: #d0d0d0">)</span>
        <span style="color: #d0d0d0">sympy_f</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">f(x)</span>
        <span style="color: #d0d0d0">sympy_dfdx</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">sp.diff(sympy_f,</span> <span style="color: #d0d0d0">x)</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.__call__</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">sp.lambdify([x],</span> <span style="color: #d0d0d0">sympy_dfdx)</span>
</pre></div>

</div>


<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pyshell) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">g</span><span style="color: #d0d0d0">(t):</span>
<span style="color: #d0d0d0">...</span>    <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">t**</span><span style="color: #3677a9">3</span>

<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">h</span><span style="color: #d0d0d0">(y):</span>
<span style="color: #d0d0d0">...</span>    <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">sp.sin(y)</span>

<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">dg</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Derivative_sympy(g)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">dh</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Derivative_sympy(h)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">dg(</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">)</span>   <span style="color: #999999; font-style: italic"># 3*1**2 = 3</span>
<span style="color: #3677a9">3</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">from</span> <span style="color: #447fcf; text-decoration: underline">math</span> <span style="color: #6ab825; font-weight: bold">import</span> <span style="color: #d0d0d0">pi</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">dh(pi)</span>  <span style="color: #999999; font-style: italic"># cos(pi) = -1</span>
<span style="color: #d0d0d0">-</span><span style="color: #3677a9">1.0</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Automagic integration; problem setting  <a name="___sec41"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
Given a function \( f(x) \), we want to compute

<p>&nbsp;<br>
$$ F(x; a) = \int_a^x f(t)dt $$
<p>&nbsp;<br>


<p>
Technique: Trapezoidal rule

<p>&nbsp;<br>
$$
\int_a^x f(t)dt = h\left({1\over2}f(a) + \sum_{i=1}^{n-1} f(a+ih) + {1\over2}f(x)\right)
$$
<p>&nbsp;<br>


<p>
Desired application code:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">f</span><span style="color: #d0d0d0">(x):</span>
    <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">exp(-x**</span><span style="color: #3677a9">2</span><span style="color: #d0d0d0">)*sin(</span><span style="color: #3677a9">10</span><span style="color: #d0d0d0">*x)</span>

<span style="color: #d0d0d0">a</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">0</span><span style="color: #d0d0d0">;</span> <span style="color: #d0d0d0">n</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">200</span>
<span style="color: #d0d0d0">F</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Integral(f,</span> <span style="color: #d0d0d0">a,</span> <span style="color: #d0d0d0">n)</span>
<span style="color: #d0d0d0">x</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">1.2</span>
<span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">F(x)</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Automagic integration; implementation  <a name="___sec42"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">trapezoidal</span><span style="color: #d0d0d0">(f,</span> <span style="color: #d0d0d0">a,</span> <span style="color: #d0d0d0">x,</span> <span style="color: #d0d0d0">n):</span>
    <span style="color: #d0d0d0">h</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">(x-a)/</span><span style="color: #24909d">float</span><span style="color: #d0d0d0">(n)</span>
    <span style="color: #d0d0d0">I</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">0.5</span><span style="color: #d0d0d0">*f(a)</span>
    <span style="color: #6ab825; font-weight: bold">for</span> <span style="color: #d0d0d0">i</span> <span style="color: #6ab825; font-weight: bold">in</span> <span style="color: #24909d">range</span><span style="color: #d0d0d0">(</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">n):</span>
        <span style="color: #d0d0d0">I</span> <span style="color: #d0d0d0">+=</span> <span style="color: #d0d0d0">f(a</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">i*h)</span>
    <span style="color: #d0d0d0">I</span> <span style="color: #d0d0d0">+=</span> <span style="color: #3677a9">0.5</span><span style="color: #d0d0d0">*f(x)</span>
    <span style="color: #d0d0d0">I</span> <span style="color: #d0d0d0">*=</span> <span style="color: #d0d0d0">h</span>
    <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">I</span>
</pre></div>
<p>
Class <code>Integral</code> holds <code>f</code>, <code>a</code> and <code>n</code> as attributes and has a call special method for computing the integral:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">Integral</span><span style="color: #d0d0d0">:</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">f,</span> <span style="color: #d0d0d0">a,</span> <span style="color: #d0d0d0">n=</span><span style="color: #3677a9">100</span><span style="color: #d0d0d0">):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.f,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.a,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.n</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">f,</span> <span style="color: #d0d0d0">a,</span> <span style="color: #d0d0d0">n</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__call__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">x):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">trapezoidal(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.f,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.a,</span> <span style="color: #d0d0d0">x,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.n)</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Automagic integration; test function  <a name="___sec43"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>

<ul>
  <p><li> How can we test class <code>Integral</code>?</li>
  <p><li> Method 1: compute by hand for some \( f \) and small \( n \)</li>
  <p><li> Method 2: utilize that linear functions are integrated
    exactly by our numerical formula, regardless of \( n \)</li>
</ul>
<p>

Test function based on method 2:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">test_Integral</span><span style="color: #d0d0d0">():</span>
    <span style="color: #d0d0d0">f</span> <span style="color: #d0d0d0">=</span> <span style="color: #6ab825; font-weight: bold">lambda</span> <span style="color: #d0d0d0">x:</span> <span style="color: #3677a9">2</span><span style="color: #d0d0d0">*x</span> <span style="color: #d0d0d0">+</span> <span style="color: #3677a9">5</span>
    <span style="color: #d0d0d0">F</span> <span style="color: #d0d0d0">=</span> <span style="color: #6ab825; font-weight: bold">lambda</span> <span style="color: #d0d0d0">x:</span> <span style="color: #d0d0d0">x**</span><span style="color: #3677a9">2</span> <span style="color: #d0d0d0">+</span> <span style="color: #3677a9">5</span><span style="color: #d0d0d0">*x</span> <span style="color: #d0d0d0">-</span> <span style="color: #d0d0d0">(a**</span><span style="color: #3677a9">2</span> <span style="color: #d0d0d0">+</span> <span style="color: #3677a9">5</span><span style="color: #d0d0d0">*a)</span>
    <span style="color: #d0d0d0">a</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">2</span>
    <span style="color: #d0d0d0">dfdx</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Integralf,</span> <span style="color: #d0d0d0">a,</span> <span style="color: #d0d0d0">n=</span><span style="color: #3677a9">4</span><span style="color: #d0d0d0">)</span>
    <span style="color: #d0d0d0">x</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">6</span>
    <span style="color: #d0d0d0">diff</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">abs</span><span style="color: #d0d0d0">(I(x)</span> <span style="color: #d0d0d0">-</span> <span style="color: #d0d0d0">(F(x)</span> <span style="color: #d0d0d0">-</span> <span style="color: #d0d0d0">F(a)))</span>
    <span style="color: #6ab825; font-weight: bold">assert</span> <span style="color: #d0d0d0">diff</span> <span style="color: #d0d0d0">&lt;</span> <span style="color: #3677a9">1E-15</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;bug in class Integral, diff=%s&#39;</span> <span style="color: #d0d0d0">%</span> <span style="color: #d0d0d0">diff</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Special method for printing  <a name="___sec44"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>

<ul>
  <p><li> In Python, we can usually print an object <code>a</code> by <code>print a</code>,
    works for built-in types (strings, lists, floats, ...)</li>
  <p><li> Python does not know how to print objects of a user-defined class,
    but if the class defines a method <code>__str__</code>, Python will use this method to convert an object to a string</li>
</ul>
<p>

Example:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">Y</span><span style="color: #d0d0d0">:</span>
    <span style="color: #d0d0d0">...</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__call__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">t):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.v0*t</span> <span style="color: #d0d0d0">-</span> <span style="color: #3677a9">0.5</span><span style="color: #d0d0d0">*</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.g*t**</span><span style="color: #3677a9">2</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__str__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #ed9d13">&#39;v0*t - 0.5*g*t**2; v0=%g&#39;</span> <span style="color: #d0d0d0">%</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.v0</span>
</pre></div>
<p>
Demo:

<p>

<!-- code=python (!bc pyshell) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">y</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Y(</span><span style="color: #3677a9">1.5</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">y(</span><span style="color: #3677a9">0.2</span><span style="color: #d0d0d0">)</span>
<span style="color: #3677a9">0.1038</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">y</span>
<span style="color: #d0d0d0">v0*t</span> <span style="color: #d0d0d0">-</span> <span style="color: #3677a9">0.5</span><span style="color: #d0d0d0">*g*t**</span><span style="color: #3677a9">2</span><span style="color: #d0d0d0">;</span> <span style="color: #d0d0d0">v0=</span><span style="color: #3677a9">1.5</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Class for polynomials; functionality  <a name="___sec45"></a></h2>

<p>
A polynomial can be specified by a list of its coefficients. For example,
\( 1 - x^2 + 2x^3 \) is

<p>&nbsp;<br>
$$  1 + 0\cdot x - 1\cdot x^2 + 2\cdot x^3 $$
<p>&nbsp;<br>


<p>
and the coefficients can be stored as <code>[1, 0, -1, 2]</code>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Desired application code:</b>
<p>
<p>

<!-- code=python (!bc pyshell) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">p1</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Polynomial([</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">-</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">])</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">p1</span>
<span style="color: #3677a9">1</span> <span style="color: #d0d0d0">-</span> <span style="color: #d0d0d0">x</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">p2</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Polynomial([</span><span style="color: #3677a9">0</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">0</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">0</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">-</span><span style="color: #3677a9">6</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">-</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">])</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">p3</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">p1</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">p2</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">p3.coeff</span>
<span style="color: #d0d0d0">[</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">0</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">0</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">0</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">-</span><span style="color: #3677a9">6</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">-</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">]</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">p3</span>
<span style="color: #3677a9">1</span> <span style="color: #d0d0d0">-</span> <span style="color: #3677a9">6</span><span style="color: #d0d0d0">*x^</span><span style="color: #3677a9">4</span> <span style="color: #d0d0d0">-</span> <span style="color: #d0d0d0">x^</span><span style="color: #3677a9">5</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">p2.differentiate()</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">p2</span>
<span style="color: #3677a9">1</span> <span style="color: #d0d0d0">-</span> <span style="color: #3677a9">24</span><span style="color: #d0d0d0">*x^</span><span style="color: #3677a9">3</span> <span style="color: #d0d0d0">-</span> <span style="color: #3677a9">5</span><span style="color: #d0d0d0">*x^</span><span style="color: #3677a9">4</span>
</pre></div>
<p>
How can we make class <code>Polynomial</code>?
</div>


<p>

</section>


<section>

<h2>Class Polynomial; basic code  <a name="___sec46"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">Polynomial</span><span style="color: #d0d0d0">:</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">coefficients):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.coeff</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">coefficients</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__call__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">x):</span>
        <span style="color: #d0d0d0">s</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">0</span>
        <span style="color: #6ab825; font-weight: bold">for</span> <span style="color: #d0d0d0">i</span> <span style="color: #6ab825; font-weight: bold">in</span> <span style="color: #24909d">range</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">len</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.coeff)):</span>
            <span style="color: #d0d0d0">s</span> <span style="color: #d0d0d0">+=</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.coeff[i]*x**i</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">s</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Class Polynomial; addition  <a name="___sec47"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">Polynomial</span><span style="color: #d0d0d0">:</span>
    <span style="color: #d0d0d0">...</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__add__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other):</span>
        <span style="color: #999999; font-style: italic"># return self + other</span>

        <span style="color: #999999; font-style: italic"># start with the longest list and add in the other:</span>
        <span style="color: #6ab825; font-weight: bold">if</span> <span style="color: #24909d">len</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.coeff)</span> <span style="color: #d0d0d0">&gt;</span> <span style="color: #24909d">len</span><span style="color: #d0d0d0">(other.coeff):</span>
            <span style="color: #d0d0d0">coeffsum</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.coeff[:]</span>  <span style="color: #999999; font-style: italic"># copy!</span>
            <span style="color: #6ab825; font-weight: bold">for</span> <span style="color: #d0d0d0">i</span> <span style="color: #6ab825; font-weight: bold">in</span> <span style="color: #24909d">range</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">len</span><span style="color: #d0d0d0">(other.coeff)):</span>
                <span style="color: #d0d0d0">coeffsum[i]</span> <span style="color: #d0d0d0">+=</span> <span style="color: #d0d0d0">other.coeff[i]</span>
        <span style="color: #6ab825; font-weight: bold">else</span><span style="color: #d0d0d0">:</span>
            <span style="color: #d0d0d0">coeffsum</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">other.coeff[:]</span> <span style="color: #999999; font-style: italic"># copy!</span>
            <span style="color: #6ab825; font-weight: bold">for</span> <span style="color: #d0d0d0">i</span> <span style="color: #6ab825; font-weight: bold">in</span> <span style="color: #24909d">range</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">len</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.coeff)):</span>
                <span style="color: #d0d0d0">coeffsum[i]</span> <span style="color: #d0d0d0">+=</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.coeff[i]</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">Polynomial(coeffsum)</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Class Polynomial; multiplication  <a name="___sec48"></a></h2>

<p>

<div class="fragment alert alert-block alert-block alert-text-small">
<b>Mathematics:</b>
<p>
Multiplication of two general polynomials:

<p>&nbsp;<br>
$$ \left(\sum_{i=0}^Mc_ix^i\right)\left(\sum_{j=0}^N d_jx^j\right)
= \sum_{i=0}^M \sum_{j=0}^N c_id_j x^{i+j} $$
<p>&nbsp;<br>


<p>
The coeff. corresponding to power \( i+j \) is \( c_i\cdot d_j \). The
list <code>r</code> of coefficients of the result:
<code>r[i+j] = c[i]*d[j]</code> (<code>i</code> and <code>j</code> running from
0 to \( M \) and \( N \), resp.)
</div>



<p>

<div class="fragment alert alert-block alert-block alert-text-normal">
<b>Implementation:</b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="fragment" class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">Polynomial</span><span style="color: #d0d0d0">:</span>
    <span style="color: #d0d0d0">...</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__mul__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other):</span>
        <span style="color: #d0d0d0">M</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">len</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.coeff)</span> <span style="color: #d0d0d0">-</span> <span style="color: #3677a9">1</span>
        <span style="color: #d0d0d0">N</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">len</span><span style="color: #d0d0d0">(other.coeff)</span> <span style="color: #d0d0d0">-</span> <span style="color: #3677a9">1</span>
        <span style="color: #d0d0d0">coeff</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">[</span><span style="color: #3677a9">0</span><span style="color: #d0d0d0">]*(M+N+</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">)</span>  <span style="color: #999999; font-style: italic"># or zeros(M+N+1)</span>
        <span style="color: #6ab825; font-weight: bold">for</span> <span style="color: #d0d0d0">i</span> <span style="color: #6ab825; font-weight: bold">in</span> <span style="color: #24909d">range</span><span style="color: #d0d0d0">(</span><span style="color: #3677a9">0</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">M+</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">):</span>
            <span style="color: #6ab825; font-weight: bold">for</span> <span style="color: #d0d0d0">j</span> <span style="color: #6ab825; font-weight: bold">in</span> <span style="color: #24909d">range</span><span style="color: #d0d0d0">(</span><span style="color: #3677a9">0</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">N+</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">):</span>
                <span style="color: #d0d0d0">coeff[i+j]</span> <span style="color: #d0d0d0">+=</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.coeff[i]*other.coeff[j]</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">Polynomial(coeff)</span>
</pre></div>

</div>



<p>

</section>


<section>

<h2>Class Polynomial; differentation  <a name="___sec49"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-small">
<b>Mathematics:</b>
<p>
Rule for differentiating a general polynomial:

<p>&nbsp;<br>
$$ {d\over dx}\sum_{i=0}^n c_ix^i = \sum_{i=1}^n ic_ix^{i-1}$$
<p>&nbsp;<br>


<p>
If <code>c</code> is the list of coefficients, the derivative has a list
of coefficients, <code>dc</code>, where <code>dc[i-1] = i*c[i]</code> for
<code>i</code> running from 1 to the largest index in <code>c</code>.
Note that <code>dc</code> has one element less than <code>c</code>.
</div>


<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Implementation:</b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">Polynomial</span><span style="color: #d0d0d0">:</span>
    <span style="color: #d0d0d0">...</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">differentiate</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>    <span style="color: #999999; font-style: italic"># change self</span>
        <span style="color: #6ab825; font-weight: bold">for</span> <span style="color: #d0d0d0">i</span> <span style="color: #6ab825; font-weight: bold">in</span> <span style="color: #24909d">range</span><span style="color: #d0d0d0">(</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #24909d">len</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.coeff)):</span>
            <span style="color: #24909d">self</span><span style="color: #d0d0d0">.coeff[i-</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">]</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">i*</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.coeff[i]</span>
        <span style="color: #6ab825; font-weight: bold">del</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.coeff[-</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">]</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">derivative</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>       <span style="color: #999999; font-style: italic"># return new polynomial</span>
        <span style="color: #d0d0d0">dpdx</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Polynomial(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.coeff[:])</span>  <span style="color: #999999; font-style: italic"># copy</span>
        <span style="color: #d0d0d0">dpdx.differentiate()</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">dpdx</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Class Polynomial; pretty print  <a name="___sec50"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">Polynomial</span><span style="color: #d0d0d0">:</span>
    <span style="color: #d0d0d0">...</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__str__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
        <span style="color: #d0d0d0">s</span> <span style="color: #d0d0d0">=</span> <span style="color: #ed9d13">&#39;&#39;</span>
        <span style="color: #6ab825; font-weight: bold">for</span> <span style="color: #d0d0d0">i</span> <span style="color: #6ab825; font-weight: bold">in</span> <span style="color: #24909d">range</span><span style="color: #d0d0d0">(</span><span style="color: #3677a9">0</span><span style="color: #d0d0d0">,</span> <span style="color: #24909d">len</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.coeff)):</span>
            <span style="color: #6ab825; font-weight: bold">if</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.coeff[i]</span> <span style="color: #d0d0d0">!=</span> <span style="color: #3677a9">0</span><span style="color: #d0d0d0">:</span>
                <span style="color: #d0d0d0">s</span> <span style="color: #d0d0d0">+=</span> <span style="color: #ed9d13">&#39; + %g*x^%d&#39;</span> <span style="color: #d0d0d0">%</span> <span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.coeff[i],</span> <span style="color: #d0d0d0">i)</span>
        <span style="color: #999999; font-style: italic"># fix layout (lots of special cases):</span>
        <span style="color: #d0d0d0">s</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">s.replace(</span><span style="color: #ed9d13">&#39;+ -&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;- &#39;</span><span style="color: #d0d0d0">)</span>
        <span style="color: #d0d0d0">s</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">s.replace(</span><span style="color: #ed9d13">&#39; 1*&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39; &#39;</span><span style="color: #d0d0d0">)</span>
        <span style="color: #d0d0d0">s</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">s.replace(</span><span style="color: #ed9d13">&#39;x^0&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;1&#39;</span><span style="color: #d0d0d0">)</span>
        <span style="color: #d0d0d0">s</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">s.replace(</span><span style="color: #ed9d13">&#39;x^1 &#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;x &#39;</span><span style="color: #d0d0d0">)</span>
        <span style="color: #d0d0d0">s</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">s.replace(</span><span style="color: #ed9d13">&#39;x^1&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;x&#39;</span><span style="color: #d0d0d0">)</span>
        <span style="color: #6ab825; font-weight: bold">if</span> <span style="color: #d0d0d0">s[</span><span style="color: #3677a9">0</span><span style="color: #d0d0d0">:</span><span style="color: #3677a9">3</span><span style="color: #d0d0d0">]</span> <span style="color: #d0d0d0">==</span> <span style="color: #ed9d13">&#39; + &#39;</span><span style="color: #d0d0d0">:</span>  <span style="color: #999999; font-style: italic"># remove initial +</span>
            <span style="color: #d0d0d0">s</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">s[</span><span style="color: #3677a9">3</span><span style="color: #d0d0d0">:]</span>
        <span style="color: #6ab825; font-weight: bold">if</span> <span style="color: #d0d0d0">s[</span><span style="color: #3677a9">0</span><span style="color: #d0d0d0">:</span><span style="color: #3677a9">3</span><span style="color: #d0d0d0">]</span> <span style="color: #d0d0d0">==</span> <span style="color: #ed9d13">&#39; - &#39;</span><span style="color: #d0d0d0">:</span>  <span style="color: #999999; font-style: italic"># fix spaces for initial -</span>
            <span style="color: #d0d0d0">s</span> <span style="color: #d0d0d0">=</span> <span style="color: #ed9d13">&#39;-&#39;</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">s[</span><span style="color: #3677a9">3</span><span style="color: #d0d0d0">:]</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">s</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Class for polynomials; usage  <a name="___sec51"></a></h2>

<p>
Consider

<p>&nbsp;<br>
$$ p_1(x)= 1-x,\quad p_2(x)=x - 6x^4 - x^5 $$
<p>&nbsp;<br>

and their sum

<p>&nbsp;<br>
$$ p_3(x) = p_1(x) + p_2(x) = 1 -6x^4 - x^5 $$
<p>&nbsp;<br>


<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pyshell) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">p1</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Polynomial([</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">-</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">])</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">p1</span>
<span style="color: #3677a9">1</span> <span style="color: #d0d0d0">-</span> <span style="color: #d0d0d0">x</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">p2</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Polynomial([</span><span style="color: #3677a9">0</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">0</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">0</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">-</span><span style="color: #3677a9">6</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">-</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">])</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">p3</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">p1</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">p2</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">p3.coeff</span>
<span style="color: #d0d0d0">[</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">0</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">0</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">0</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">-</span><span style="color: #3677a9">6</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">-</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">]</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">p2.differentiate()</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">p2</span>
<span style="color: #3677a9">1</span> <span style="color: #d0d0d0">-</span> <span style="color: #3677a9">24</span><span style="color: #d0d0d0">*x^</span><span style="color: #3677a9">3</span> <span style="color: #d0d0d0">-</span> <span style="color: #3677a9">5</span><span style="color: #d0d0d0">*x^</span><span style="color: #3677a9">4</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>The programmer is in charge of defining special methods!  <a name="___sec52"></a></h2>

<p>

<div class="fragment alert alert-block alert-block alert-text-normal">
<b></b>
<p>
How should, e.g., <code>__add__(self, other)</code> be defined? This is completely up to the programmer, depending on what is meaningful by <code>object1 + object2</code>.
</div>



<p>

<div class="fragment alert alert-block alert-block alert-text-normal">
<b></b>
<p>
An anthropologist was asking a primitive tribesman about arithmetic.  When the anthropologist asked, <em>What does two and two make?</em> the tribesman replied, <em>Five.</em>  Asked to explain, the tribesman said, <em>If I have a rope with two knots, and another rope with two knots, and I join the ropes together, then I have five knots.</em>
</div>



<p>

</section>


<section>

<h2>Special methods for arithmetic operations  <a name="___sec53"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">c</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">a</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">b</span>    <span style="color: #999999; font-style: italic">#  c = a.__add__(b)</span>

<span style="color: #d0d0d0">c</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">a</span> <span style="color: #d0d0d0">-</span> <span style="color: #d0d0d0">b</span>    <span style="color: #999999; font-style: italic">#  c = a.__sub__(b)</span>

<span style="color: #d0d0d0">c</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">a*b</span>      <span style="color: #999999; font-style: italic">#  c = a.__mul__(b)</span>

<span style="color: #d0d0d0">c</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">a/b</span>      <span style="color: #999999; font-style: italic">#  c = a.__div__(b)</span>

<span style="color: #d0d0d0">c</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">a**e</span>     <span style="color: #999999; font-style: italic">#  c = a.__pow__(e)</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Special methods for comparisons  <a name="___sec54"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">a</span> <span style="color: #d0d0d0">==</span> <span style="color: #d0d0d0">b</span>       <span style="color: #999999; font-style: italic">#  a.__eq__(b)</span>

<span style="color: #d0d0d0">a</span> <span style="color: #d0d0d0">!=</span> <span style="color: #d0d0d0">b</span>       <span style="color: #999999; font-style: italic">#  a.__ne__(b)</span>

<span style="color: #d0d0d0">a</span> <span style="color: #d0d0d0">&lt;</span> <span style="color: #d0d0d0">b</span>        <span style="color: #999999; font-style: italic">#  a.__lt__(b)</span>

<span style="color: #d0d0d0">a</span> <span style="color: #d0d0d0">&lt;=</span> <span style="color: #d0d0d0">b</span>       <span style="color: #999999; font-style: italic">#  a.__le__(b)</span>

<span style="color: #d0d0d0">a</span> <span style="color: #d0d0d0">&gt;</span> <span style="color: #d0d0d0">b</span>        <span style="color: #999999; font-style: italic">#  a.__gt__(b)</span>

<span style="color: #d0d0d0">a</span> <span style="color: #d0d0d0">&gt;=</span> <span style="color: #d0d0d0">b</span>       <span style="color: #999999; font-style: italic">#  a.__ge__(b)</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Class for vectors in the plane  <a name="___sec55"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-small">
<b>Mathematical operations for vectors in the plane:</b>
<p>

<p>&nbsp;<br>
$$
\begin{align*}
(a,b) + (c,d) &= (a+c, b+d)\\
(a,b) - (c,d) &= (a-c, b-d)\\
(a,b)\cdot(c,d) &= ac + bd\\
(a,b) &= (c, d)\hbox{ if }a=c\hbox{ and }b=d
\end{align*}
$$
<p>&nbsp;<br>
</div>


<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Desired application code:</b>
<p>
<p>

<!-- code=python (!bc pyshell) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">u</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Vec2D(</span><span style="color: #3677a9">0</span><span style="color: #d0d0d0">,</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">v</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Vec2D(</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span><span style="color: #3677a9">0</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">u</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">v</span>
<span style="color: #d0d0d0">(</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">1</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">a</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">u</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">v</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">w</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Vec2D(</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">a</span> <span style="color: #d0d0d0">==</span> <span style="color: #d0d0d0">w</span>
<span style="color: #24909d">True</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">u</span> <span style="color: #d0d0d0">-</span> <span style="color: #d0d0d0">v</span>
<span style="color: #d0d0d0">(-</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">1</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">u*v</span>
<span style="color: #3677a9">0</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Class for vectors; implementation  <a name="___sec56"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"> <span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">Vec2D</span><span style="color: #d0d0d0">:</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">x,</span> <span style="color: #d0d0d0">y):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.x</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">x;</span>  <span style="color: #24909d">self</span><span style="color: #d0d0d0">.y</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">y</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__add__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">Vec2D(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.x+other.x,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.y+other.y)</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__sub__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">Vec2D(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.x-other.x,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.y-other.y)</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__mul__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.x*other.x</span> <span style="color: #d0d0d0">+</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.y*other.y</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__abs__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">math.sqrt(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.x**</span><span style="color: #3677a9">2</span> <span style="color: #d0d0d0">+</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.y**</span><span style="color: #3677a9">2</span><span style="color: #d0d0d0">)</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__eq__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.x</span> <span style="color: #d0d0d0">==</span> <span style="color: #d0d0d0">other.x</span> <span style="color: #6ab825; font-weight: bold">and</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.y</span> <span style="color: #d0d0d0">==</span> <span style="color: #d0d0d0">other.y</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__str__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #ed9d13">&#39;(%g, %g)&#39;</span> <span style="color: #d0d0d0">%</span> <span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.x,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.y)</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__ne__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #6ab825; font-weight: bold">not</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.__eq__(other)</span>  <span style="color: #999999; font-style: italic"># reuse __eq__</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>The repr special method: <code>eval(repr(p))</code> creates <code>p</code>  <a name="___sec57"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">MyClass</span><span style="color: #d0d0d0">:</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">a,</span> <span style="color: #d0d0d0">b):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.a,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.b</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">a,</span> <span style="color: #d0d0d0">b</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__str__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
        <span style="color: #ed9d13">&quot;&quot;&quot;Return string with pretty print.&quot;&quot;&quot;</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #ed9d13">&#39;a=%s, b=%s&#39;</span> <span style="color: #d0d0d0">%</span> <span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.a,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.b)</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__repr__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
        <span style="color: #ed9d13">&quot;&quot;&quot;Return string such that eval(s) recreates self.&quot;&quot;&quot;</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #ed9d13">&#39;MyClass(%s, %s)&#39;</span> <span style="color: #d0d0d0">%</span> <span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.a,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.b)</span>
</pre></div>

</div>


<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pyshell) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">m</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">MyClass(</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">5</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">m</span>      <span style="color: #999999; font-style: italic"># calls m.__str__()</span>
<span style="color: #d0d0d0">a=</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">b=</span><span style="color: #3677a9">5</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #24909d">str</span><span style="color: #d0d0d0">(m)</span>       <span style="color: #999999; font-style: italic"># calls m.__str__()</span>
<span style="color: #ed9d13">&#39;a=1, b=5&#39;</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">s</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">repr</span><span style="color: #d0d0d0">(m)</span>  <span style="color: #999999; font-style: italic"># calls m.__repr__()</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">s</span>
<span style="color: #ed9d13">&#39;MyClass(1, 5)&#39;</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">m2</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">eval</span><span style="color: #d0d0d0">(s)</span> <span style="color: #999999; font-style: italic"># same as m2 = MyClass(1, 5)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">m2</span>           <span style="color: #999999; font-style: italic"># calls m.__repr__()</span>
<span style="color: #ed9d13">&#39;MyClass(1, 5)&#39;</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Class Y revisited with repr print method  <a name="___sec58"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">Y</span><span style="color: #d0d0d0">:</span>
    <span style="color: #ed9d13">&quot;&quot;&quot;Class for function y(t; v0, g) = v0*t - 0.5*g*t**2.&quot;&quot;&quot;</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">v0):</span>
        <span style="color: #ed9d13">&quot;&quot;&quot;Store parameters.&quot;&quot;&quot;</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.v0</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">v0</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.g</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">9.81</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__call__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">t):</span>
        <span style="color: #ed9d13">&quot;&quot;&quot;Evaluate function.&quot;&quot;&quot;</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.v0*t</span> <span style="color: #d0d0d0">-</span> <span style="color: #3677a9">0.5</span><span style="color: #d0d0d0">*</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.g*t**</span><span style="color: #3677a9">2</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__str__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
        <span style="color: #ed9d13">&quot;&quot;&quot;Pretty print.&quot;&quot;&quot;</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #ed9d13">&#39;v0*t - 0.5*g*t**2; v0=%g&#39;</span> <span style="color: #d0d0d0">%</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.v0</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__repr__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
        <span style="color: #ed9d13">&quot;&quot;&quot;Print code for regenerating this instance.&quot;&quot;&quot;</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #ed9d13">&#39;Y(%s)&#39;</span> <span style="color: #d0d0d0">%</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.v0</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Class for complex numbers; functionality  <a name="___sec59"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
Python already has a class <code>complex</code> for complex numbers, but implementing such a class is a good pedagogical example on class programming (especially with special methods).
</div>


<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Usage:</b>
<p>
<p>

<!-- code=python (!bc pyshell) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">u</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Complex(</span><span style="color: #3677a9">2</span><span style="color: #d0d0d0">,-</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">v</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Complex(</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">)</span>     <span style="color: #999999; font-style: italic"># zero imaginary part</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">w</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">u</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">v</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">w</span>
<span style="color: #d0d0d0">(</span><span style="color: #3677a9">3</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">-</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">w</span> <span style="color: #d0d0d0">!=</span> <span style="color: #d0d0d0">u</span>
<span style="color: #24909d">True</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">u*v</span>
<span style="color: #d0d0d0">Complex(</span><span style="color: #3677a9">2</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">-</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">u</span> <span style="color: #d0d0d0">&lt;</span> <span style="color: #d0d0d0">v</span>
<span style="color: #d0d0d0">illegal</span> <span style="color: #d0d0d0">operation</span> <span style="color: #ed9d13">&quot;&lt;&quot;</span> <span style="color: #6ab825; font-weight: bold">for</span> <span style="color: #24909d">complex</span> <span style="color: #d0d0d0">numbers</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">w</span> <span style="color: #d0d0d0">+</span> <span style="color: #3677a9">4</span>
<span style="color: #d0d0d0">(</span><span style="color: #3677a9">7</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">-</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #3677a9">4</span> <span style="color: #d0d0d0">-</span> <span style="color: #d0d0d0">w</span>
<span style="color: #d0d0d0">(</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">1</span><span style="color: #d0d0d0">)</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Class for complex numbers; implementation (part 1)  <a name="___sec60"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">Complex</span><span style="color: #d0d0d0">:</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">real,</span> <span style="color: #d0d0d0">imag=</span><span style="color: #3677a9">0.0</span><span style="color: #d0d0d0">):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.real</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">real</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.imag</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">imag</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__add__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">Complex(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.real</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">other.real,</span>
                       <span style="color: #24909d">self</span><span style="color: #d0d0d0">.imag</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">other.imag)</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__sub__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">Complex(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.real</span> <span style="color: #d0d0d0">-</span> <span style="color: #d0d0d0">other.real,</span>
                       <span style="color: #24909d">self</span><span style="color: #d0d0d0">.imag</span> <span style="color: #d0d0d0">-</span> <span style="color: #d0d0d0">other.imag)</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__mul__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">Complex(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.real*other.real</span> <span style="color: #d0d0d0">-</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.imag*other.imag,</span>
                       <span style="color: #24909d">self</span><span style="color: #d0d0d0">.imag*other.real</span> <span style="color: #d0d0d0">+</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.real*other.imag)</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__div__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other):</span>
        <span style="color: #d0d0d0">ar,</span> <span style="color: #d0d0d0">ai,</span> <span style="color: #d0d0d0">br,</span> <span style="color: #d0d0d0">bi</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.real,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.imag,</span> \
                         <span style="color: #d0d0d0">other.real,</span> <span style="color: #d0d0d0">other.imag</span> <span style="color: #999999; font-style: italic"># short forms</span>
        <span style="color: #d0d0d0">r</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">float</span><span style="color: #d0d0d0">(br**</span><span style="color: #3677a9">2</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">bi**</span><span style="color: #3677a9">2</span><span style="color: #d0d0d0">)</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">Complex((ar*br+ai*bi)/r,</span> <span style="color: #d0d0d0">(ai*br-ar*bi)/r)</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Class for complex numbers; implementation (part 2)  <a name="___sec61"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%">    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__abs__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">sqrt(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.real**</span><span style="color: #3677a9">2</span> <span style="color: #d0d0d0">+</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.imag**</span><span style="color: #3677a9">2</span><span style="color: #d0d0d0">)</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__neg__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>   <span style="color: #999999; font-style: italic"># defines -c (c is Complex)</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">Complex(-</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.real,</span> <span style="color: #d0d0d0">-</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.imag)</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__eq__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.real</span> <span style="color: #d0d0d0">==</span> <span style="color: #d0d0d0">other.real</span> <span style="color: #6ab825; font-weight: bold">and</span> \
               <span style="color: #24909d">self</span><span style="color: #d0d0d0">.imag</span> <span style="color: #d0d0d0">==</span> <span style="color: #d0d0d0">other.imag</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__ne__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #6ab825; font-weight: bold">not</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.__eq__(other)</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__str__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #ed9d13">&#39;(%g, %g)&#39;</span> <span style="color: #d0d0d0">%</span> <span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.real,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.imag)</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__repr__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #ed9d13">&#39;Complex&#39;</span> <span style="color: #d0d0d0">+</span> <span style="color: #24909d">str</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">)</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__pow__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">power):</span>
        <span style="color: #6ab825; font-weight: bold">raise</span> <span style="color: #bbbbbb">NotImplementedError</span><span style="color: #d0d0d0">(</span>
          <span style="color: #ed9d13">&#39;self**power is not yet impl. for Complex&#39;</span><span style="color: #d0d0d0">)</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Refining the special methods for arithmetics  <a name="___sec62"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
Can we add a real number to a complex number?

<p>

<!-- code=python (!bc pyshell) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">u</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Complex(</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">2</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">w</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">u</span> <span style="color: #d0d0d0">+</span> <span style="color: #3677a9">4.5</span>
<span style="color: #d0d0d0">...</span>
<span style="color: #bbbbbb">AttributeError</span><span style="color: #d0d0d0">:</span> <span style="color: #ed9d13">&#39;float&#39;</span> <span style="color: #24909d">object</span> <span style="color: #d0d0d0">has</span> <span style="color: #d0d0d0">no</span> <span style="color: #d0d0d0">attribute</span> <span style="color: #ed9d13">&#39;real&#39;</span>
</pre></div>
<p>
Problem: we have assumed that <code>other</code> is <code>Complex</code>.
Remedy:

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">Complex</span><span style="color: #d0d0d0">:</span>
    <span style="color: #d0d0d0">...</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__add__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other):</span>
        <span style="color: #6ab825; font-weight: bold">if</span> <span style="color: #24909d">isinstance</span><span style="color: #d0d0d0">(other,</span> <span style="color: #d0d0d0">(</span><span style="color: #24909d">float</span><span style="color: #d0d0d0">,</span><span style="color: #24909d">int</span><span style="color: #d0d0d0">)):</span>
            <span style="color: #d0d0d0">other</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Complex(other)</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">Complex(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.real</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">other.real,</span>
                       <span style="color: #24909d">self</span><span style="color: #d0d0d0">.imag</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">other.imag)</span>

<span style="color: #999999; font-style: italic"># or</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__add__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other):</span>
        <span style="color: #6ab825; font-weight: bold">if</span> <span style="color: #24909d">isinstance</span><span style="color: #d0d0d0">(other,</span> <span style="color: #d0d0d0">(</span><span style="color: #24909d">float</span><span style="color: #d0d0d0">,</span><span style="color: #24909d">int</span><span style="color: #d0d0d0">)):</span>
            <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">Complex(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.real</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">other,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.imag)</span>
        <span style="color: #6ab825; font-weight: bold">else</span><span style="color: #d0d0d0">:</span>
            <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">Complex(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.real</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">other.real,</span>
                           <span style="color: #24909d">self</span><span style="color: #d0d0d0">.imag</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">other.imag)</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Special methods for &quot;right&quot; operands; addition  <a name="___sec63"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
What if we try this:

<p>

<!-- code=python (!bc pyshell) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">u</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Complex(</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">2</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">w</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">4.5</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">u</span>
<span style="color: #d0d0d0">...</span>
<span style="color: #bbbbbb">TypeError</span><span style="color: #d0d0d0">:</span> <span style="color: #d0d0d0">unsupported</span> <span style="color: #d0d0d0">operand</span> <span style="color: #24909d">type</span><span style="color: #d0d0d0">(s)</span> <span style="color: #6ab825; font-weight: bold">for</span> <span style="color: #d0d0d0">+:</span>
    <span style="color: #ed9d13">&#39;float&#39;</span> <span style="color: #6ab825; font-weight: bold">and</span> <span style="color: #ed9d13">&#39;instance&#39;</span>
</pre></div>
<p>
Problem: Python's <code>float</code> objects cannot add a <code>Complex</code>.

<p>
Remedy: if a class has an <code>__radd__(self, other)</code> special method, Python applies this for <code>other + self</code>

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">Complex</span><span style="color: #d0d0d0">:</span>
    <span style="color: #d0d0d0">...</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__radd__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other):</span>
        <span style="color: #ed9d13">&quot;&quot;&quot;Rturn other + self.&quot;&quot;&quot;</span>
        <span style="color: #999999; font-style: italic"># other + self = self + other:</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.__add__(other)</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Special methods for &quot;right&quot; operands; subtraction  <a name="___sec64"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
Right operands for subtraction is a bit more complicated since \( a-b \neq b-a \):

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">Complex</span><span style="color: #d0d0d0">:</span>
    <span style="color: #d0d0d0">...</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__sub__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other):</span>
        <span style="color: #6ab825; font-weight: bold">if</span> <span style="color: #24909d">isinstance</span><span style="color: #d0d0d0">(other,</span> <span style="color: #d0d0d0">(</span><span style="color: #24909d">float</span><span style="color: #d0d0d0">,</span><span style="color: #24909d">int</span><span style="color: #d0d0d0">)):</span>
            <span style="color: #d0d0d0">other</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Complex(other)</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">Complex(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.real</span> <span style="color: #d0d0d0">-</span> <span style="color: #d0d0d0">other.real,</span>
                       <span style="color: #24909d">self</span><span style="color: #d0d0d0">.imag</span> <span style="color: #d0d0d0">-</span> <span style="color: #d0d0d0">other.imag)</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__rsub__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other):</span>
        <span style="color: #6ab825; font-weight: bold">if</span> <span style="color: #24909d">isinstance</span><span style="color: #d0d0d0">(other,</span> <span style="color: #d0d0d0">(</span><span style="color: #24909d">float</span><span style="color: #d0d0d0">,</span><span style="color: #24909d">int</span><span style="color: #d0d0d0">)):</span>
            <span style="color: #d0d0d0">other</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Complex(other)</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">other.__sub__(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">)</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>What's in a class?  <a name="___sec65"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"> <span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">A</span><span style="color: #d0d0d0">:</span>
    <span style="color: #ed9d13">&quot;&quot;&quot;A class for demo purposes.&quot;&quot;&quot;</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">value):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.v</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">value</span>
</pre></div>
<p>
Any instance holds its attributes in the <code>self.__dict__</code> dictionary (Python automatically creates this dict)

<p>

<!-- code=python (!bc pyshell) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">a</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">A([</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span><span style="color: #3677a9">2</span><span style="color: #d0d0d0">])</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">a.__dict__</span>  <span style="color: #999999; font-style: italic"># all attributes</span>
<span style="color: #d0d0d0">{</span><span style="color: #ed9d13">&#39;v&#39;</span><span style="color: #d0d0d0">:</span> <span style="color: #d0d0d0">[</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">2</span><span style="color: #d0d0d0">]}</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #24909d">dir</span><span style="color: #d0d0d0">(a)</span>            <span style="color: #999999; font-style: italic"># what&#39;s in object a?</span>
<span style="color: #ed9d13">&#39;__doc__&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;__init__&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;__module__&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;dump&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;v&#39;</span><span style="color: #d0d0d0">]</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">a.__doc__</span>         <span style="color: #999999; font-style: italic"># programmer&#39;s documentation of A</span>
<span style="color: #ed9d13">&#39;A class for demo purposes.&#39;</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Ooops - we can add new attributes as we want!  <a name="___sec66"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pyshell) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">a.myvar</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">10</span>            <span style="color: #999999; font-style: italic"># add new attribute (!)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">a.__dict__</span>
<span style="color: #d0d0d0">{</span><span style="color: #ed9d13">&#39;myvar&#39;</span><span style="color: #d0d0d0">:</span> <span style="color: #3677a9">10</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;v&#39;</span><span style="color: #d0d0d0">:</span> <span style="color: #d0d0d0">[</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">2</span><span style="color: #d0d0d0">]}</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #24909d">dir</span><span style="color: #d0d0d0">(a)</span>
<span style="color: #d0d0d0">[</span><span style="color: #ed9d13">&#39;__doc__&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;__init__&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;__module__&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;dump&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;myvar&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;v&#39;</span><span style="color: #d0d0d0">]</span>

<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">b</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">A(-</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">b.__dict__</span>              <span style="color: #999999; font-style: italic"># b has no myvar attribute</span>
<span style="color: #d0d0d0">{</span><span style="color: #ed9d13">&#39;v&#39;</span><span style="color: #d0d0d0">:</span> <span style="color: #d0d0d0">-</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">}</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #24909d">dir</span><span style="color: #d0d0d0">(b)</span>
<span style="color: #d0d0d0">[</span><span style="color: #ed9d13">&#39;__doc__&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;__init__&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;__module__&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;dump&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;v&#39;</span><span style="color: #d0d0d0">]</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Summary of defining a class  <a name="___sec67"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Example on a defining a class with attributes and methods:</b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">Gravity</span><span style="color: #d0d0d0">:</span>
    <span style="color: #ed9d13">&quot;&quot;&quot;Gravity force between two objects.&quot;&quot;&quot;</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">m,</span> <span style="color: #d0d0d0">M):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.m</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">m</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.M</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">M</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.G</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">6.67428E-11</span> <span style="color: #999999; font-style: italic"># gravity constant</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">force</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">r):</span>
        <span style="color: #d0d0d0">G,</span> <span style="color: #d0d0d0">m,</span> <span style="color: #d0d0d0">M</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.G,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.m,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.M</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">G*m*M/r**</span><span style="color: #3677a9">2</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">visualize</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">r_start,</span> <span style="color: #d0d0d0">r_stop,</span> <span style="color: #d0d0d0">n=</span><span style="color: #3677a9">100</span><span style="color: #d0d0d0">):</span>
        <span style="color: #6ab825; font-weight: bold">from</span> <span style="color: #447fcf; text-decoration: underline">scitools.std</span> <span style="color: #6ab825; font-weight: bold">import</span> <span style="color: #d0d0d0">plot,</span> <span style="color: #d0d0d0">linspace</span>
        <span style="color: #d0d0d0">r</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">linspace(r_start,</span> <span style="color: #d0d0d0">r_stop,</span> <span style="color: #d0d0d0">n)</span>
        <span style="color: #d0d0d0">g</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.force(r)</span>
        <span style="color: #d0d0d0">title=</span><span style="color: #ed9d13">&#39;m=%g, M=%g&#39;</span> <span style="color: #d0d0d0">%</span> <span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.m,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.M)</span>
        <span style="color: #d0d0d0">plot(r,</span> <span style="color: #d0d0d0">g,</span> <span style="color: #d0d0d0">title=title)</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Summary of using a class  <a name="___sec68"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Example on using the class:</b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">mass_moon</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">7.35E+22</span>
<span style="color: #d0d0d0">mass_earth</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">5.97E+24</span>

<span style="color: #999999; font-style: italic"># make instance of class Gravity:</span>
<span style="color: #d0d0d0">gravity</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">Gravity(mass_moon,</span> <span style="color: #d0d0d0">mass_earth)</span>

<span style="color: #d0d0d0">r</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">3.85E+8</span>  <span style="color: #999999; font-style: italic"># earth-moon distance in meters</span>
<span style="color: #d0d0d0">Fg</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">gravity.force(r)</span>   <span style="color: #999999; font-style: italic"># call class method</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Summary of special methods  <a name="___sec69"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>

<ul>
  <p><li> <code>c = a + b</code> implies <code>c = a.__add__(b)</code></li>
  <p><li> There are special methods for <code>a+b</code>, <code>a-b</code>, <code>a*b</code>, <code>a/b</code>, <code>a**b</code>, <code>-a</code>, <code>if a:</code>, <code>len(a)</code>, <code>str(a)</code> (pretty print), <code>repr(a)</code> (recreate <code>a</code> with <code>eval</code>), etc.</li>
  <p><li> With special methods we can create new mathematical objects like vectors, polynomials and complex numbers and write &quot;mathematical code&quot; (arithmetics)</li>
  <p><li> The call special method is particularly handy: <code>v = c(5)</code> means <code>v = c.__call__(5)</code></li>
  <p><li> Functions with parameters should be represented by a class with the parameters as attributes and with a call special method for evaluating the function</li>
</ul>
</div>


<p>

</section>


<section>

<h2>Summarizing example: interval arithmetics for uncertainty quantification in formulas  <a name="___sec70"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Uncertainty quantification:</b>
<p>
Consider measuring gravity \( g \) by dropping a ball from \( y=y_0 \) to \( y=0 \)
in time \( T \):

<p>&nbsp;<br>
$$ g = 2y_0T^{-2} $$
<p>&nbsp;<br>


<p>
What if \( y_0 \) and \( T \) are uncertain? Say \( y_0\in [0.99,1.01] \) m
and \( T\in [0.43, 0.47] \) s. What is the uncertainty in \( g \)?
</div>


<p>

</section>


<section>

<h2>The uncertainty can be computed by interval arithmetics  <a name="___sec71"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Interval arithmetics.</b>
<p>
Rules for computing with intervals, \( p=[a,b] \) and \( q=[c,d] \):

<ul>
 <p><li> \( p+q = [a + c, b + d] \)</li>
 <p><li> \( p-q = [a - d, b - c] \)</li>
 <p><li> \( pq =  [\min(ac, ad, bc, bd), \max(ac, ad, bc, bd)] \)</li>
 <p><li> \( p/q = [\min(a/c, a/d, b/c, b/d), \max(a/c, a/d, b/c, b/d)] \)
   (\( [c,d] \) cannot contain zero)</li>
</ul>
<p>

Obvious idea: make a class for interval arithmetics!
</div>


<p>

</section>


<section>

<h2>Class for interval arithmetics  <a name="___sec72"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">IntervalMath</span><span style="color: #d0d0d0">:</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__init__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">lower,</span> <span style="color: #d0d0d0">upper):</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.lo</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">float</span><span style="color: #d0d0d0">(lower)</span>
        <span style="color: #24909d">self</span><span style="color: #d0d0d0">.up</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">float</span><span style="color: #d0d0d0">(upper)</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__add__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other):</span>
        <span style="color: #d0d0d0">a,</span> <span style="color: #d0d0d0">b,</span> <span style="color: #d0d0d0">c,</span> <span style="color: #d0d0d0">d</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.lo,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.up,</span> <span style="color: #d0d0d0">other.lo,</span> <span style="color: #d0d0d0">other.up</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">IntervalMath(a</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">c,</span> <span style="color: #d0d0d0">b</span> <span style="color: #d0d0d0">+</span> <span style="color: #d0d0d0">d)</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__sub__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other):</span>
        <span style="color: #d0d0d0">a,</span> <span style="color: #d0d0d0">b,</span> <span style="color: #d0d0d0">c,</span> <span style="color: #d0d0d0">d</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.lo,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.up,</span> <span style="color: #d0d0d0">other.lo,</span> <span style="color: #d0d0d0">other.up</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">IntervalMath(a</span> <span style="color: #d0d0d0">-</span> <span style="color: #d0d0d0">d,</span> <span style="color: #d0d0d0">b</span> <span style="color: #d0d0d0">-</span> <span style="color: #d0d0d0">c)</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__mul__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other):</span>
        <span style="color: #d0d0d0">a,</span> <span style="color: #d0d0d0">b,</span> <span style="color: #d0d0d0">c,</span> <span style="color: #d0d0d0">d</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.lo,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.up,</span> <span style="color: #d0d0d0">other.lo,</span> <span style="color: #d0d0d0">other.up</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">IntervalMath(</span><span style="color: #24909d">min</span><span style="color: #d0d0d0">(a*c,</span> <span style="color: #d0d0d0">a*d,</span> <span style="color: #d0d0d0">b*c,</span> <span style="color: #d0d0d0">b*d),</span>
                            <span style="color: #24909d">max</span><span style="color: #d0d0d0">(a*c,</span> <span style="color: #d0d0d0">a*d,</span> <span style="color: #d0d0d0">b*c,</span> <span style="color: #d0d0d0">b*d))</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__div__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other):</span>
        <span style="color: #d0d0d0">a,</span> <span style="color: #d0d0d0">b,</span> <span style="color: #d0d0d0">c,</span> <span style="color: #d0d0d0">d</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.lo,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.up,</span> <span style="color: #d0d0d0">other.lo,</span> <span style="color: #d0d0d0">other.up</span>
        <span style="color: #6ab825; font-weight: bold">if</span> <span style="color: #d0d0d0">c*d</span> <span style="color: #d0d0d0">&lt;=</span> <span style="color: #3677a9">0</span><span style="color: #d0d0d0">:</span> <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #24909d">None</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">IntervalMath(</span><span style="color: #24909d">min</span><span style="color: #d0d0d0">(a/c,</span> <span style="color: #d0d0d0">a/d,</span> <span style="color: #d0d0d0">b/c,</span> <span style="color: #d0d0d0">b/d),</span>
                            <span style="color: #24909d">max</span><span style="color: #d0d0d0">(a/c,</span> <span style="color: #d0d0d0">a/d,</span> <span style="color: #d0d0d0">b/c,</span> <span style="color: #d0d0d0">b/d))</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__str__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #ed9d13">&#39;[%g, %g]&#39;</span> <span style="color: #d0d0d0">%</span> <span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.lo,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.up)</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Demo of the new class for interval arithmetics  <a name="___sec73"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Code:</b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">I</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">IntervalMath</span>   <span style="color: #999999; font-style: italic"># abbreviate</span>
<span style="color: #d0d0d0">a</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">I(-</span><span style="color: #3677a9">3</span><span style="color: #d0d0d0">,-</span><span style="color: #3677a9">2</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">b</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">I(</span><span style="color: #3677a9">4</span><span style="color: #d0d0d0">,</span><span style="color: #3677a9">5</span><span style="color: #d0d0d0">)</span>

<span style="color: #d0d0d0">expr</span> <span style="color: #d0d0d0">=</span> <span style="color: #ed9d13">&#39;a+b&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;a-b&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;a*b&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #ed9d13">&#39;a/b&#39;</span>   <span style="color: #999999; font-style: italic"># test expressions</span>
<span style="color: #6ab825; font-weight: bold">for</span> <span style="color: #d0d0d0">e</span> <span style="color: #6ab825; font-weight: bold">in</span> <span style="color: #d0d0d0">expr:</span>
    <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">e,</span> <span style="color: #ed9d13">&#39;=&#39;</span><span style="color: #d0d0d0">,</span> <span style="color: #24909d">eval</span><span style="color: #d0d0d0">(e)</span>
</pre></div>

</div>


<p>
<div class="alert alert-block alert-block alert-text-normal">
<b>Output:</b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">a+b</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">[</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">3</span><span style="color: #d0d0d0">]</span>
<span style="color: #d0d0d0">a-b</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">[-</span><span style="color: #3677a9">8</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">-</span><span style="color: #3677a9">6</span><span style="color: #d0d0d0">]</span>
<span style="color: #d0d0d0">a*b</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">[-</span><span style="color: #3677a9">15</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">-</span><span style="color: #3677a9">8</span><span style="color: #d0d0d0">]</span>
<span style="color: #d0d0d0">a/b</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">[-</span><span style="color: #3677a9">0.75</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">-</span><span style="color: #3677a9">0.4</span><span style="color: #d0d0d0">]</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Shortcomings of the class  <a name="___sec74"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
This code

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">a</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">I(</span><span style="color: #3677a9">4</span><span style="color: #d0d0d0">,</span><span style="color: #3677a9">5</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">q</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">2</span>
<span style="color: #d0d0d0">b</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">a*q</span>
</pre></div>
<p>
leads to

<p>

<!-- code=text typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%">  File &quot;IntervalMath.py&quot;, line 15, in __mul__
    a, b, c, d = self.lo, self.up, other.lo, other.up
AttributeError: &#39;float&#39; object has no attribute &#39;lo&#39;
</pre></div>
<p>
Problem: <code>IntervalMath</code> times <code>int</code> is not defined.

<p>
Remedy: (cf. class <code>Complex</code>)

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">IntervalArithmetics</span><span style="color: #d0d0d0">:</span>
    <span style="color: #d0d0d0">...</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__mul__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other):</span>
        <span style="color: #6ab825; font-weight: bold">if</span> <span style="color: #24909d">isinstance</span><span style="color: #d0d0d0">(other,</span> <span style="color: #d0d0d0">(</span><span style="color: #24909d">int</span><span style="color: #d0d0d0">,</span> <span style="color: #24909d">float</span><span style="color: #d0d0d0">)):</span>      <span style="color: #999999; font-style: italic"># NEW</span>
            <span style="color: #d0d0d0">other</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">IntervalMath(other,</span> <span style="color: #d0d0d0">other)</span>   <span style="color: #999999; font-style: italic"># NEW</span>
        <span style="color: #d0d0d0">a,</span> <span style="color: #d0d0d0">b,</span> <span style="color: #d0d0d0">c,</span> <span style="color: #d0d0d0">d</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.lo,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.up,</span> <span style="color: #d0d0d0">other.lo,</span> <span style="color: #d0d0d0">other.up</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">IntervalMath(</span><span style="color: #24909d">min</span><span style="color: #d0d0d0">(a*c,</span> <span style="color: #d0d0d0">a*d,</span> <span style="color: #d0d0d0">b*c,</span> <span style="color: #d0d0d0">b*d),</span>
                            <span style="color: #24909d">max</span><span style="color: #d0d0d0">(a*c,</span> <span style="color: #d0d0d0">a*d,</span> <span style="color: #d0d0d0">b*c,</span> <span style="color: #d0d0d0">b*d))</span>
</pre></div>
<p>
(with similar adjustments of other special methods)
</div>


<p>

</section>


<section>

<h2>More shortcomings of the class  <a name="___sec75"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
Try to compute <code>g = 2*y0*T**(-2)</code>:
multiplication of <code>int</code> (2) and
<code>IntervalMath</code> (<code>y0</code>),
and power operation <code>T**(-2)</code> are not defined
</div>


<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">IntervalArithmetics</span><span style="color: #d0d0d0">:</span>
    <span style="color: #d0d0d0">...</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__rmul__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">other):</span>
        <span style="color: #6ab825; font-weight: bold">if</span> <span style="color: #24909d">isinstance</span><span style="color: #d0d0d0">(other,</span> <span style="color: #d0d0d0">(</span><span style="color: #24909d">int</span><span style="color: #d0d0d0">,</span> <span style="color: #24909d">float</span><span style="color: #d0d0d0">)):</span>
            <span style="color: #d0d0d0">other</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">IntervalMath(other,</span> <span style="color: #d0d0d0">other)</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">other*</span><span style="color: #24909d">self</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__pow__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">exponent):</span>
        <span style="color: #6ab825; font-weight: bold">if</span> <span style="color: #24909d">isinstance</span><span style="color: #d0d0d0">(exponent,</span> <span style="color: #24909d">int</span><span style="color: #d0d0d0">):</span>
            <span style="color: #d0d0d0">p</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">1</span>
            <span style="color: #6ab825; font-weight: bold">if</span> <span style="color: #d0d0d0">exponent</span> <span style="color: #d0d0d0">&gt;</span> <span style="color: #3677a9">0</span><span style="color: #d0d0d0">:</span>
                <span style="color: #6ab825; font-weight: bold">for</span> <span style="color: #d0d0d0">i</span> <span style="color: #6ab825; font-weight: bold">in</span> <span style="color: #24909d">range</span><span style="color: #d0d0d0">(exponent):</span>
                    <span style="color: #d0d0d0">p</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">p*</span><span style="color: #24909d">self</span>
            <span style="color: #6ab825; font-weight: bold">elif</span> <span style="color: #d0d0d0">exponent</span> <span style="color: #d0d0d0">&lt;</span> <span style="color: #3677a9">0</span><span style="color: #d0d0d0">:</span>
                <span style="color: #6ab825; font-weight: bold">for</span> <span style="color: #d0d0d0">i</span> <span style="color: #6ab825; font-weight: bold">in</span> <span style="color: #24909d">range</span><span style="color: #d0d0d0">(-exponent):</span>
                    <span style="color: #d0d0d0">p</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">p*</span><span style="color: #24909d">self</span>
                <span style="color: #d0d0d0">p</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">1</span><span style="color: #d0d0d0">/p</span>
            <span style="color: #6ab825; font-weight: bold">else</span><span style="color: #d0d0d0">:</span>   <span style="color: #999999; font-style: italic"># exponent == 0</span>
                <span style="color: #d0d0d0">p</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">IntervalMath(</span><span style="color: #3677a9">1</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">1</span><span style="color: #d0d0d0">)</span>
            <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #d0d0d0">p</span>
        <span style="color: #6ab825; font-weight: bold">else</span><span style="color: #d0d0d0">:</span>
            <span style="color: #6ab825; font-weight: bold">raise</span> <span style="color: #bbbbbb">TypeError</span><span style="color: #d0d0d0">(</span><span style="color: #ed9d13">&#39;exponent must int&#39;</span><span style="color: #d0d0d0">)</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Adding more functionality to the class: rounding  <a name="___sec76"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
&quot;Rounding&quot; to the midpoint value:

<p>

<!-- code=python (!bc pyshell) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">a</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">IntervalMath(</span><span style="color: #3677a9">5</span><span style="color: #d0d0d0">,</span><span style="color: #3677a9">7</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #24909d">float</span><span style="color: #d0d0d0">(a)</span>
<span style="color: #3677a9">6</span>
</pre></div>
<p>
is achieved by

<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">IntervalArithmetics</span><span style="color: #d0d0d0">:</span>
    <span style="color: #d0d0d0">...</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__float__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #3677a9">0.5</span><span style="color: #d0d0d0">*(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.lo</span> <span style="color: #d0d0d0">+</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.up)</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Adding more functionality to the class: repr and str methods  <a name="___sec77"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pycod) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #6ab825; font-weight: bold">class</span> <span style="color: #447fcf; text-decoration: underline">IntervalArithmetics</span><span style="color: #d0d0d0">:</span>
    <span style="color: #d0d0d0">...</span>
    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__str__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #ed9d13">&#39;[%g, %g]&#39;</span> <span style="color: #d0d0d0">%</span> <span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.lo,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.up)</span>

    <span style="color: #6ab825; font-weight: bold">def</span> <span style="color: #447fcf">__repr__</span><span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">):</span>
        <span style="color: #6ab825; font-weight: bold">return</span> <span style="color: #ed9d13">&#39;%s(%g, %g)&#39;</span> <span style="color: #d0d0d0">%</span> \
          <span style="color: #d0d0d0">(</span><span style="color: #24909d">self</span><span style="color: #d0d0d0">.__class__.__name__,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.lo,</span> <span style="color: #24909d">self</span><span style="color: #d0d0d0">.up)</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Demonstrating the class: \( g=2y_0T^{-2} \)  <a name="___sec78"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pyshell) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">g</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">9.81</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">y_0</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">I(</span><span style="color: #3677a9">0.99</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">1.01</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">Tm</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">0.45</span>                 <span style="color: #999999; font-style: italic"># mean T</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">T</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">I(Tm*</span><span style="color: #3677a9">0.95</span><span style="color: #d0d0d0">,</span> <span style="color: #d0d0d0">Tm*</span><span style="color: #3677a9">1.05</span><span style="color: #d0d0d0">)</span>   <span style="color: #999999; font-style: italic"># 10% uncertainty</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">T</span>
<span style="color: #d0d0d0">[</span><span style="color: #3677a9">0.4275</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">0.4725</span><span style="color: #d0d0d0">]</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">g</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">2</span><span style="color: #d0d0d0">*y_0*T**(-</span><span style="color: #3677a9">2</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">g</span>
<span style="color: #d0d0d0">IntervalMath(</span><span style="color: #3677a9">8.86873</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">11.053</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #999999; font-style: italic"># computing with mean values:</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">T</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">float</span><span style="color: #d0d0d0">(T)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">y</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">1</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">g</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">2</span><span style="color: #d0d0d0">*y_0*T**(-</span><span style="color: #3677a9">2</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #ed9d13">&#39;%.2f&#39;</span> <span style="color: #d0d0d0">%</span> <span style="color: #d0d0d0">g</span>
<span style="color: #3677a9">9.88</span>
</pre></div>

</div>


<p>

</section>


<section>

<h2>Demonstrating the class: volume of a sphere  <a name="___sec79"></a></h2>

<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
<p>

<!-- code=python (!bc pyshell) typeset with pygments style "native" -->
<div class="highlight" style="background: #202020"><pre style="font-size: 110%; font-size: 80%; line-height: 125%"><span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">R</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">I(</span><span style="color: #3677a9">6</span><span style="color: #d0d0d0">*</span><span style="color: #3677a9">0.9</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">6</span><span style="color: #d0d0d0">*</span><span style="color: #3677a9">1.1</span><span style="color: #d0d0d0">)</span>   <span style="color: #999999; font-style: italic"># 20 % error</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">V</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">(</span><span style="color: #3677a9">4.</span><span style="color: #d0d0d0">/</span><span style="color: #3677a9">3</span><span style="color: #d0d0d0">)*pi*R**</span><span style="color: #3677a9">3</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">V</span>
<span style="color: #d0d0d0">IntervalMath(</span><span style="color: #3677a9">659.584</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">1204.26</span><span style="color: #d0d0d0">)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">V</span>
<span style="color: #d0d0d0">[</span><span style="color: #3677a9">659.584</span><span style="color: #d0d0d0">,</span> <span style="color: #3677a9">1204.26</span><span style="color: #d0d0d0">]</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #24909d">float</span><span style="color: #d0d0d0">(V)</span>
<span style="color: #3677a9">931.922044761</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #999999; font-style: italic"># compute with mean values:</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">R</span> <span style="color: #d0d0d0">=</span> <span style="color: #24909d">float</span><span style="color: #d0d0d0">(R)</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #d0d0d0">V</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">(</span><span style="color: #3677a9">4.</span><span style="color: #d0d0d0">/</span><span style="color: #3677a9">3</span><span style="color: #d0d0d0">)*pi*R**</span><span style="color: #3677a9">3</span>
<span style="color: #d0d0d0">&gt;&gt;&gt;</span> <span style="color: #6ab825; font-weight: bold">print</span> <span style="color: #d0d0d0">V</span>
<span style="color: #3677a9">904.778684234</span>
</pre></div>

</div>


<p>
<div class="alert alert-block alert-block alert-text-normal">
<b></b>
<p>
20% uncertainty in \( R \) gives almost 60% uncertainty in \( V \)
</div>



</section>



</div> <!-- class="slides" -->
</div> <!-- class="reveal" -->

<script src="reveal.js/lib/js/head.min.js"></script>
<script src="reveal.js/js/reveal.min.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({

    // Display navigation controls in the bottom right corner
    controls: true,

    // Display progress bar (below the horiz. slider)
    progress: true,

    // Display the page number of the current slide
    slideNumber: true,

    // Push each slide change to the browser history
    history: false,

    // Enable keyboard shortcuts for navigation
    keyboard: true,

    // Enable the slide overview mode
    overview: true,

    // Vertical centering of slides
    //center: true,
    center: false,

    // Enables touch navigation on devices with touch input
    touch: true,

    // Loop the presentation
    loop: false,

    // Change the presentation direction to be RTL
    rtl: false,

    // Turns fragments on and off globally
    fragments: true,

    // Flags if the presentation is running in an embedded mode,
    // i.e. contained within a limited portion of the screen
    embedded: false,

    // Number of milliseconds between automatically proceeding to the
    // next slide, disabled when set to 0, this value can be overwritten
    // by using a data-autoslide attribute on your slides
    autoSlide: 0,

    // Stop auto-sliding after user input
    autoSlideStoppable: true,

    // Enable slide navigation via mouse wheel
    mouseWheel: false,

    // Hides the address bar on mobile devices
    hideAddressBar: true,

    // Opens links in an iframe preview overlay
    previewLinks: false,

    // Transition style
    transition: 'default', // default/cube/page/concave/zoom/linear/fade/none

    // Transition speed
    transitionSpeed: 'default', // default/fast/slow

    // Transition style for full page slide backgrounds
    backgroundTransition: 'default', // default/none/slide/concave/convex/zoom

    // Number of slides away from the current that are visible
    viewDistance: 3,

    // Parallax background image
    //parallaxBackgroundImage: '', // e.g. "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'"

    // Parallax background size
    //parallaxBackgroundSize: '' // CSS syntax, e.g. "2100px 900px"

    theme: Reveal.getQueryHash().theme, // available themes are in reveal.js/css/theme
    transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/none

});

Reveal.initialize({
    dependencies: [
        // Cross-browser shim that fully implements classList - https://github.com/eligrey/classList.js/
        { src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },

        // Interpret Markdown in <section> elements
        { src: 'reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: 'reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },

        // Syntax highlight for <code> elements
        { src: 'reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },

        // Zoom in and out with Alt+click
        { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },

        // Speaker notes
        { src: 'reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },

        // Remote control your reveal.js presentation using a touch device
        //{ src: 'reveal.js/plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } },

        // MathJax
        //{ src: 'reveal.js/plugin/math/math.js', async: true }
    ]
});

Reveal.initialize({

    // The "normal" size of the presentation, aspect ratio will be preserved
    // when the presentation is scaled to fit different resolutions. Can be
    // specified using percentage units.
    width: 1170,  // original: 960,
    height: 700,

    // Factor of the display size that should remain empty around the content
    margin: 0.1,

    // Bounds for smallest/largest possible scale to apply to content
    minScale: 0.2,
    maxScale: 1.0

});
</script>

<!-- begin footer logo
<div style="position: absolute; bottom: 0px; left: 0; margin-left: 0px">
<img src="somelogo.png">
</div>
     end footer logo -->



</body>
</html>
